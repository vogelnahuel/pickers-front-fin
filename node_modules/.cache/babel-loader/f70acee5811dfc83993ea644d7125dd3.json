{"ast":null,"code":"import createCSV from \".,/../../src/utils/createCSV\";\nimport { goBack } from \"connected-react-router\";\nimport i18next from \"i18next\";\nimport moment from \"moment\";\nimport { actions } from \"reducers/pickers\";\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport { DATE_FORMATS } from \"utils/constants\";\nimport * as pickersMiddleware from \"../middleware/pickers\";\nimport { actions as detailPickerActions } from \"../reducers/detailPicker\";\nimport { actions as notificationActions } from \"../reducers/notification\";\nconst sagas = [takeLatest(actions.getPendingUserRequest.type, getPickers), takeLatest(actions.getPendingUserExportRequest.type, getPendingUserExport), takeLatest(actions.getMorePendingUserRequest.type, getMorePendingUser), takeLatest(detailPickerActions.getPendingUserPickerRequest.type, getPendingUserPicker), takeLatest(detailPickerActions.getPendingUserPickerExportRequest.type, getPendingUserPickerExport), takeLatest(detailPickerActions.getPendingUserPickerDocumentsEditRequest.type, postPendingUserDocumentsEdit), takeLatest(detailPickerActions.getAprovePickerRequest.type, postAprovePicker), takeLatest(detailPickerActions.getEditPickerRequest.type, postEditPicker), takeLatest(detailPickerActions.getPickerFileRequest.type, getPickerFile), takeLatest(detailPickerActions.getPickerFileSaveRequest.type, putFileUpload), takeLatest(detailPickerActions.getBankNameFetch.type, getBankName), takeLatest(detailPickerActions.getPickerFileDeleteRequest.type, fileDelete), takeLatest(detailPickerActions.getProvincesRequest.type, getProvinces)];\nexport default sagas;\n\nconst process = body => {\n  var _body$vehicle, _body$vehicle$patent;\n\n  return { ...body,\n    personalData: { ...body.personalData,\n      dateOfBirth: moment(body.personalData.dateOfBirth, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate)\n    },\n    accountingData: { ...body.accountingData,\n      fiscalNumber: body.accountingData.fiscalNumber.slice(0, 2) + body.accountingData.fiscalNumber.slice(5, 13) + body.accountingData.fiscalNumber.slice(16, 17)\n    },\n    vehicle: { ...body.vehicle,\n      patent: body === null || body === void 0 ? void 0 : (_body$vehicle = body.vehicle) === null || _body$vehicle === void 0 ? void 0 : (_body$vehicle$patent = _body$vehicle.patent) === null || _body$vehicle$patent === void 0 ? void 0 : _body$vehicle$patent.toUpperCase(),\n      expirationDatePolicyVehicle: body.vehicle.expirationDatePolicyVehicle && body.vehicle.expirationDatePolicyVehicle !== \"\" ? body.vehicle.expirationDatePolicyVehicle.match(DATE_FORMATS.regexshortDate) ? moment(body.vehicle.expirationDatePolicyVehicle, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate) : body.vehicle.expirationDatePolicyVehicle : null,\n      expirationDateIdentificationVehicle: body.vehicle.expirationDateIdentificationVehicle && body.vehicle.expirationDateIdentificationVehicle !== \"\" ? body.vehicle.expirationDateIdentificationVehicle.match(DATE_FORMATS.regexshortDate) ? moment(body.vehicle.expirationDateIdentificationVehicle, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate) : body.vehicle.expirationDateIdentificationVehicle : null,\n      expirationDateDriverLicense: body.vehicle.expirationDateDriverLicense && body.vehicle.expirationDateDriverLicense !== \"\" ? body.vehicle.expirationDateDriverLicense.match(DATE_FORMATS.regexshortDate) ? moment(body.vehicle.expirationDateDriverLicense, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate) : body.vehicle.expirationDateDriverLicense : null\n    }\n  };\n};\n\nfunction* getPickers(_ref) {\n  let {\n    payload\n  } = _ref;\n  const response = yield call(pickersMiddleware.getPickers, payload);\n\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserError());\n  } else {\n    const {\n      result: {\n        items\n      },\n      ...rest\n    } = response.data;\n    yield put(actions.getPendingUserSuccess({\n      items,\n      ...rest\n    }));\n  }\n}\n\nfunction* getBankName(_ref2) {\n  let {\n    payload\n  } = _ref2;\n  const response = yield call(pickersMiddleware.getBankName, payload.cbuPrefix);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getBankNameError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(detailPickerActions.getBankNameSuccess(result));\n  }\n}\n\nfunction* getMorePendingUser(_ref3) {\n  let {\n    payload\n  } = _ref3;\n  const response = yield call(pickersMiddleware.getPickers, payload);\n\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserError());\n  } else {\n    const {\n      result: {\n        items\n      },\n      ...rest\n    } = response.data;\n    yield put(actions.getMorePendingUserSuccess({\n      items,\n      ...rest\n    }));\n  }\n}\n\nfunction* getPendingUserPicker(_ref4) {\n  let {\n    payload\n  } = _ref4;\n  const response = yield call(pickersMiddleware.getPicker, payload);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPendingUserPickerError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(detailPickerActions.getPendingUserPickerSuccess(result));\n    yield put(actions.setActualPage(result.status.id === 4 || result.status.id === 5 ? \"ACTIVE\" : \"PENDING\"));\n  }\n}\n\nfunction* getPendingUserExport(_ref5) {\n  let {\n    payload\n  } = _ref5;\n  const response = yield call(pickersMiddleware.getPickersExport, payload);\n\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserExportError());\n  } else {\n    createCSV(response.data, \"pickers\");\n    yield put(actions.getPendingUserExportSuccess());\n    yield put(notificationActions.showNotification({\n      level: \"success\",\n      title: i18next.t(\"global:title.modal.export\"),\n      body: i18next.t(\"global:label.modal.export\")\n    }));\n  }\n}\n\nfunction* getPendingUserPickerExport(_ref6) {\n  let {\n    payload: {\n      email\n    }\n  } = _ref6;\n  const response = yield call(pickersMiddleware.getPickerExport, {\n    email\n  });\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPendingUserPickerExportError());\n  } else {\n    createCSV(response.data, \"pickers\");\n    yield put(notificationActions.showNotification({\n      level: \"success\",\n      title: i18next.t(\"global:title.modal.export\"),\n      body: i18next.t(\"global:label.modal.export\")\n    }));\n    yield put(detailPickerActions.getPendingUserPickerExportSuccess());\n  }\n}\n\nfunction* postPendingUserDocumentsEdit(_ref7) {\n  let {\n    payload\n  } = _ref7;\n  let body = process(payload);\n  const response = yield call(pickersMiddleware.postPickerDocumentsEdit, body);\n\n  if (response.status !== 200) {\n    yield put(notificationActions.showNotification({\n      level: \"error\",\n      title: i18next.t(\"global:title.modal.connectionError\"),\n      body: i18next.t(\"global:label.modal.connectionError\")\n    }));\n    yield put(detailPickerActions.getPendingUserPickerDocumentsEditError());\n  } else {\n    yield put(goBack());\n    yield put(detailPickerActions.getPendingUserPickerDocumentsEditSuccess(body));\n  }\n}\n\nfunction* postAprovePicker(_ref8) {\n  let {\n    payload: {\n      params,\n      goBack\n    }\n  } = _ref8;\n  let body = process(params);\n  const response = yield call(pickersMiddleware.postAprovePicker, body);\n\n  if (response.status !== 200) {\n    yield put(notificationActions.showNotification({\n      level: \"error\",\n      title: i18next.t(\"global:title.modal.connectionError\"),\n      body: i18next.t(\"global:label.modal.connectionError\")\n    }));\n    yield put(detailPickerActions.getAprovePickerError());\n  } else {\n    yield put(notificationActions.showNotification({\n      level: \"success\",\n      title: i18next.t(\"detailPicker:title.modal.approved\"),\n      body: i18next.t(\"detailPicker:label.modal.approved\"),\n      onClick: goBack\n    }));\n    yield put(detailPickerActions.getAprovePickerSuccess(body));\n  }\n}\n\nfunction* postEditPicker(_ref9) {\n  let {\n    payload: {\n      params,\n      goBack\n    }\n  } = _ref9;\n  let body = process(params);\n  const response = yield call(pickersMiddleware.postEditPicker, body);\n\n  if (response.status !== 200) {\n    yield put(notificationActions.showNotification({\n      level: \"error\",\n      title: i18next.t(\"global:title.modal.connectionError\"),\n      body: i18next.t(\"global:label.modal.connectionError\")\n    }));\n    yield put(detailPickerActions.getEditPickerError());\n  } else {\n    yield put(notificationActions.showNotification({\n      level: \"success\",\n      title: i18next.t(\"global:title.modal.changesSaved\"),\n      body: i18next.t(\"global:label.modal.changesSaved\"),\n      onClick: goBack\n    }));\n    yield put(detailPickerActions.getEditPickerSuccess(body));\n  }\n}\n\nfunction* getPickerFile(_ref10) {\n  let {\n    payload\n  } = _ref10;\n  const response = yield call(pickersMiddleware.getFile, payload);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileError());\n  } else {\n    const {\n      result\n    } = response.data;\n    if (result.url) window.open(result.url, \"_blank\");\n    yield put(detailPickerActions.getPickerFileSuccess());\n  }\n}\n\nfunction* fileDelete(_ref11) {\n  let {\n    payload: {\n      id,\n      tag\n    }\n  } = _ref11;\n  const response = yield call(pickersMiddleware.deleteFile, id, tag);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileDeleteError({\n      tag\n    }));\n  } else {\n    yield put(detailPickerActions.getPickerFileDeleteSuccess({\n      tag\n    }));\n    yield put(detailPickerActions.getPendingUserPickerRequest(id));\n  }\n}\n\nfunction* putFileUpload(_ref12) {\n  let {\n    payload: {\n      id,\n      content,\n      tag\n    }\n  } = _ref12;\n  const response = yield call(pickersMiddleware.fileUpload, id, {\n    content: content,\n    tag: tag\n  });\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileSaveError({\n      tag\n    }));\n  } else {\n    yield put(detailPickerActions.getPickerFileSaveSuccess({\n      tag\n    }));\n    yield put(detailPickerActions.getPendingUserPickerRequest(id));\n  }\n}\n\nfunction* getProvinces() {\n  const response = yield call(pickersMiddleware.getProvinces);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getProvincesError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(detailPickerActions.getProvincesSuccess(result.items));\n  }\n}","map":{"version":3,"sources":["/home/nahuel/pickers-admin-front/src/sagas/pickers.ts"],"names":["createCSV","goBack","i18next","moment","actions","call","put","takeLatest","DATE_FORMATS","pickersMiddleware","detailPickerActions","notificationActions","sagas","getPendingUserRequest","type","getPickers","getPendingUserExportRequest","getPendingUserExport","getMorePendingUserRequest","getMorePendingUser","getPendingUserPickerRequest","getPendingUserPicker","getPendingUserPickerExportRequest","getPendingUserPickerExport","getPendingUserPickerDocumentsEditRequest","postPendingUserDocumentsEdit","getAprovePickerRequest","postAprovePicker","getEditPickerRequest","postEditPicker","getPickerFileRequest","getPickerFile","getPickerFileSaveRequest","putFileUpload","getBankNameFetch","getBankName","getPickerFileDeleteRequest","fileDelete","getProvincesRequest","getProvinces","process","body","personalData","dateOfBirth","shortDate","format","shortISODate","accountingData","fiscalNumber","slice","vehicle","patent","toUpperCase","expirationDatePolicyVehicle","match","regexshortDate","expirationDateIdentificationVehicle","expirationDateDriverLicense","payload","response","status","getPendingUserError","result","items","rest","data","getPendingUserSuccess","cbuPrefix","getBankNameError","getBankNameSuccess","getMorePendingUserSuccess","getPicker","getPendingUserPickerError","getPendingUserPickerSuccess","setActualPage","id","getPickersExport","getPendingUserExportError","getPendingUserExportSuccess","showNotification","level","title","t","email","getPickerExport","getPendingUserPickerExportError","getPendingUserPickerExportSuccess","postPickerDocumentsEdit","getPendingUserPickerDocumentsEditError","getPendingUserPickerDocumentsEditSuccess","params","getAprovePickerError","onClick","getAprovePickerSuccess","getEditPickerError","getEditPickerSuccess","getFile","getPickerFileError","url","window","open","getPickerFileSuccess","tag","deleteFile","getPickerFileDeleteError","getPickerFileDeleteSuccess","content","fileUpload","getPickerFileSaveError","getPickerFileSaveSuccess","getProvincesError","getProvincesSuccess"],"mappings":"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","sourcesContent":["import createCSV from \".,/../../src/utils/createCSV\";\nimport { PayloadAction } from \"@reduxjs/toolkit\";\nimport { AxiosResponse } from \"axios\";\nimport { DeleteFileType } from \"component/admin/ExpandableFile/types\";\nimport { goBack } from \"connected-react-router\";\nimport i18next from \"i18next\";\nimport { ApiResponse } from \"middleware/api\";\nimport moment from \"moment\";\nimport { PickerFileRequestType } from \"pages/pickers/detailPicker/types\";\nimport { actions } from \"reducers/pickers\";\nimport { NotificationStateType } from \"reducers/types/notification\";\nimport {\n  call,\n  CallEffect,\n  put,\n  PutEffect,\n  takeLatest,\n} from \"redux-saga/effects\";\nimport { DATE_FORMATS } from \"utils/constants\";\nimport * as pickersMiddleware from \"../middleware/pickers\";\nimport {\n  AcountDataType,\n  DetailPickerTagFileType,\n  EditPickerResponseType,\n  FilesType,\n  ParamsMiddlewareType,\n  PersonalDataType,\n  PickerFileResponseType,\n  PickersAxiosResponseType,\n  PickersExportResponseType,\n  PickersResponse,\n  PickerType,\n  StatusType,\n  VehicleType,\n} from \"../pages/pickers/types\";\nimport { actions as detailPickerActions } from \"../reducers/detailPicker\";\nimport { actions as notificationActions } from \"../reducers/notification\";\nimport {\n  BankResponseType,\n  CsvResponseType,\n  DetailPickersProvincesApiResponseType,\n  PickerResponseType,\n  PickersResponseType,\n} from \"./types/pickers\";\n\nconst sagas = [\n  takeLatest(actions.getPendingUserRequest.type, getPickers),\n  takeLatest(actions.getPendingUserExportRequest.type, getPendingUserExport),\n  takeLatest(actions.getMorePendingUserRequest.type, getMorePendingUser),\n  takeLatest(\n    detailPickerActions.getPendingUserPickerRequest.type,\n    getPendingUserPicker\n  ),\n  takeLatest(\n    detailPickerActions.getPendingUserPickerExportRequest.type,\n    getPendingUserPickerExport\n  ),\n  takeLatest(\n    detailPickerActions.getPendingUserPickerDocumentsEditRequest.type,\n    postPendingUserDocumentsEdit\n  ),\n  takeLatest(detailPickerActions.getAprovePickerRequest.type, postAprovePicker),\n  takeLatest(detailPickerActions.getEditPickerRequest.type, postEditPicker),\n  takeLatest(detailPickerActions.getPickerFileRequest.type, getPickerFile),\n  takeLatest(detailPickerActions.getPickerFileSaveRequest.type, putFileUpload),\n  takeLatest(detailPickerActions.getBankNameFetch.type, getBankName),\n  takeLatest(detailPickerActions.getPickerFileDeleteRequest.type, fileDelete),\n\n  takeLatest(detailPickerActions.getProvincesRequest.type, getProvinces),\n];\n\nexport default sagas;\n\nconst process = (body: {\n  id: number;\n  enable: boolean;\n  registerDatetime: string;\n  status: StatusType;\n  personalData: PersonalDataType;\n  accountingData: AcountDataType;\n  vehicle: VehicleType;\n  files: FilesType;\n}) => {\n  return {\n    ...body,\n\n    personalData: {\n      ...body.personalData,\n      dateOfBirth: moment(\n        body.personalData.dateOfBirth,\n        DATE_FORMATS.shortDate\n      ).format(DATE_FORMATS.shortISODate),\n    },\n    accountingData: {\n      ...body.accountingData,\n      fiscalNumber:\n        body.accountingData.fiscalNumber.slice(0, 2) +\n        body.accountingData.fiscalNumber.slice(5, 13) +\n        body.accountingData.fiscalNumber.slice(16, 17),\n    },\n    vehicle: {\n      ...body.vehicle,\n      patent: body?.vehicle?.patent?.toUpperCase(),\n      expirationDatePolicyVehicle:\n        body.vehicle.expirationDatePolicyVehicle &&\n          body.vehicle.expirationDatePolicyVehicle !== \"\"\n          ? body.vehicle.expirationDatePolicyVehicle.match(\n            DATE_FORMATS.regexshortDate\n          )\n            ? moment(\n              body.vehicle.expirationDatePolicyVehicle,\n              DATE_FORMATS.shortDate\n            ).format(DATE_FORMATS.shortISODate)\n            : body.vehicle.expirationDatePolicyVehicle\n          : null,\n      expirationDateIdentificationVehicle:\n        body.vehicle.expirationDateIdentificationVehicle &&\n          body.vehicle.expirationDateIdentificationVehicle !== \"\"\n          ? body.vehicle.expirationDateIdentificationVehicle.match(\n            DATE_FORMATS.regexshortDate\n          )\n            ? moment(\n              body.vehicle.expirationDateIdentificationVehicle,\n              DATE_FORMATS.shortDate\n            ).format(DATE_FORMATS.shortISODate)\n            : body.vehicle.expirationDateIdentificationVehicle\n          : null,\n      expirationDateDriverLicense:\n        body.vehicle.expirationDateDriverLicense &&\n          body.vehicle.expirationDateDriverLicense !== \"\"\n          ? body.vehicle.expirationDateDriverLicense.match(\n            DATE_FORMATS.regexshortDate\n          )\n            ? moment(\n              body.vehicle.expirationDateDriverLicense,\n              DATE_FORMATS.shortDate\n            ).format(DATE_FORMATS.shortISODate)\n            : body.vehicle.expirationDateDriverLicense\n          : null,\n    },\n  };\n};\nfunction* getPickers({\n  payload,\n}: PayloadAction<ParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PickersAxiosResponseType>>\n  | PutEffect<{ type: string; pendingUsers: PickersResponse }>\n  | PutEffect<{ type: string }>,\n  void,\n  PickersResponseType\n> {\n  const response = yield call(pickersMiddleware.getPickers, payload);\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserError());\n  } else {\n    const {\n      result: { items },\n      ...rest\n    } = response.data;\n    yield put(actions.getPendingUserSuccess({ items, ...rest }));\n  }\n}\n\n\n\nfunction* getBankName({\n  payload,\n}: PayloadAction<{ cbuPrefix: string}>): Generator<\n  CallEffect<unknown>\n  | PutEffect<{ payload: undefined; type: string; }>\n  | PutEffect<{ payload: { id: number; name: string; }; type: string; }>,\n  void,\n  ApiResponse<BankResponseType>\n> {\n  const response = yield call(pickersMiddleware.getBankName, payload.cbuPrefix);\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getBankNameError());\n  } else {\n    const { result } = response.data;\n    yield put(detailPickerActions.getBankNameSuccess(result));\n  }\n}\n\nfunction* getMorePendingUser({\n  payload,\n}: PayloadAction<ParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PickersAxiosResponseType>>\n  | PutEffect<{ type: string }>,\n  void,\n  PickersResponseType\n> {\n  const response = yield call(pickersMiddleware.getPickers, payload);\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserError());\n  } else {\n    const {\n      result: { items },\n      ...rest\n    } = response.data;\n    yield put(actions.getMorePendingUserSuccess({ items, ...rest }));\n  }\n}\n\nfunction* getPendingUserPicker({\n  payload,\n}: PayloadAction<number>): Generator<\n  CallEffect<AxiosResponse<PickerType>> | PutEffect<{ type: string }>,\n  void,\n  PickerResponseType\n> {\n  const response = yield call(pickersMiddleware.getPicker, payload);\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPendingUserPickerError());\n  } else {\n    const { result } = response.data;\n    yield put(detailPickerActions.getPendingUserPickerSuccess(result));\n    yield put(\n      actions.setActualPage(\n        result.status.id === 4 || result.status.id === 5 ? \"ACTIVE\" : \"PENDING\"\n      )\n    );\n  }\n}\n\nfunction* getPendingUserExport({\n  payload,\n}: PayloadAction<ParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PickersExportResponseType>>\n  | PutEffect<{ type: string }>,\n  void,\n  CsvResponseType\n> {\n  const response = yield call(pickersMiddleware.getPickersExport, payload);\n\n  if (response.status !== 200) {\n    yield put(actions.getPendingUserExportError());\n  } else {\n    createCSV(response.data, \"pickers\");\n    yield put(actions.getPendingUserExportSuccess());\n    yield put(\n      notificationActions.showNotification({\n        level: \"success\",\n        title: i18next.t(\"global:title.modal.export\"),\n        body: i18next.t(\"global:label.modal.export\"),\n      })\n    );\n  }\n}\n\nfunction* getPendingUserPickerExport({\n  payload: { email },\n}: PayloadAction<ParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PickersExportResponseType>>\n  | PutEffect<{ type: string }>,\n  void,\n  CsvResponseType\n> {\n  const response = yield call(pickersMiddleware.getPickerExport, { email });\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPendingUserPickerExportError());\n  } else {\n    createCSV(response.data, \"pickers\");\n    yield put(\n      notificationActions.showNotification({\n        level: \"success\",\n        title: i18next.t(\"global:title.modal.export\"),\n        body: i18next.t(\"global:label.modal.export\"),\n      })\n    );\n    yield put(detailPickerActions.getPendingUserPickerExportSuccess());\n  }\n}\n\nfunction* postPendingUserDocumentsEdit({\n  payload,\n}: PayloadAction<PickerType>): Generator<\n  | CallEffect<AxiosResponse<EditPickerResponseType>>\n  | PutEffect<{ type: string; content: NotificationStateType }>\n  | PutEffect<{ type: string }>,\n  void,\n  PickerResponseType\n> {\n  let body = process(payload);\n  const response = yield call(pickersMiddleware.postPickerDocumentsEdit, body);\n\n  if (response.status !== 200) {\n    yield put(\n      notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"global:title.modal.connectionError\"),\n        body: i18next.t(\"global:label.modal.connectionError\"),\n      })\n    );\n    yield put(detailPickerActions.getPendingUserPickerDocumentsEditError());\n  } else {\n    yield put(goBack());\n    yield put(\n      detailPickerActions.getPendingUserPickerDocumentsEditSuccess(body)\n    );\n  }\n}\n\nfunction* postAprovePicker({\n  payload: { params, goBack },\n}: PayloadAction<{ params: PickerType; goBack: Function }>): Generator<\n  | CallEffect<AxiosResponse<EditPickerResponseType>>\n  | PutEffect<{ type: string; content: NotificationStateType }>\n  | PutEffect<{ type: string }>,\n  void,\n  PickerResponseType\n> {\n  let body = process(params);\n  const response = yield call(pickersMiddleware.postAprovePicker, body);\n  if (response.status !== 200) {\n    yield put(\n      notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"global:title.modal.connectionError\"),\n        body: i18next.t(\"global:label.modal.connectionError\"),\n      })\n    );\n    yield put(detailPickerActions.getAprovePickerError());\n  } else {\n    yield put(\n      notificationActions.showNotification({\n        level: \"success\",\n        title: i18next.t(\"detailPicker:title.modal.approved\"),\n        body: i18next.t(\"detailPicker:label.modal.approved\"),\n        onClick: goBack,\n      })\n    );\n    yield put(detailPickerActions.getAprovePickerSuccess(body));\n  }\n}\n\nfunction* postEditPicker({\n  payload: { params, goBack },\n}: PayloadAction<{ params: PickerType; goBack: Function }>): Generator<\n  | CallEffect<AxiosResponse<EditPickerResponseType>>\n  | PutEffect<{ type: string; content: NotificationStateType }>\n  | PutEffect<{ type: string }>,\n  void,\n  PickerResponseType\n> {\n  let body = process(params);\n  const response = yield call(pickersMiddleware.postEditPicker, body);\n  if (response.status !== 200) {\n    yield put(\n      notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"global:title.modal.connectionError\"),\n        body: i18next.t(\"global:label.modal.connectionError\"),\n      })\n    );\n    yield put(detailPickerActions.getEditPickerError());\n  } else {\n    yield put(\n      notificationActions.showNotification({\n        level: \"success\",\n        title: i18next.t(\"global:title.modal.changesSaved\"),\n        body: i18next.t(\"global:label.modal.changesSaved\"),\n        onClick: goBack,\n      })\n    );\n    yield put(detailPickerActions.getEditPickerSuccess(body));\n  }\n}\n\nfunction* getPickerFile({\n  payload,\n}: PayloadAction<PickerFileRequestType>): Generator<\n  | CallEffect<AxiosResponse<PickerFileResponseType>>\n  | PutEffect<{ type: string }>,\n  void,\n  { status: number; data: PickerFileResponseType }\n> {\n  const response = yield call(pickersMiddleware.getFile, payload);\n\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileError());\n  } else {\n    const { result } = response.data;\n    if (result.url) window.open(result.url, \"_blank\");\n    yield put(detailPickerActions.getPickerFileSuccess());\n  }\n}\n\nfunction* fileDelete({\n  payload: { id, tag },\n}: PayloadAction<DeleteFileType>): Generator<\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<any>>\n  | Promise<AxiosResponse<any>>\n  | void,\n  void,\n  { status: number; data: {} }\n> {\n  const response = yield call(pickersMiddleware.deleteFile, id, tag);\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileDeleteError({ tag }));\n  } else {\n    yield put(detailPickerActions.getPickerFileDeleteSuccess({ tag }));\n    yield put(detailPickerActions.getPendingUserPickerRequest(id));\n  }\n}\n\nfunction* putFileUpload({\n  payload: { id, content, tag },\n}: PayloadAction<{\n  id: number;\n  content: string;\n  tag: keyof DetailPickerTagFileType;\n}>): Generator<\n  CallEffect<AxiosResponse<{}>> | PutEffect<{ type: string }> | void,\n  void,\n  { status: number; data: {} }\n> {\n  const response = yield call(pickersMiddleware.fileUpload, id, {\n    content: content,\n    tag: tag,\n  });\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getPickerFileSaveError({ tag }));\n  } else {\n    yield put(detailPickerActions.getPickerFileSaveSuccess({ tag }));\n    yield put(detailPickerActions.getPendingUserPickerRequest(id));\n  }\n}\n\nfunction* getProvinces(): Generator<\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<DetailPickersProvincesApiResponseType>>,\n  void,\n  DetailPickersProvincesApiResponseType\n> {\n  const response = yield call(pickersMiddleware.getProvinces);\n  if (response.status !== 200) {\n    yield put(detailPickerActions.getProvincesError());\n  } else {\n    const { result } = response.data;\n \n    yield put(detailPickerActions.getProvincesSuccess(result.items));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}