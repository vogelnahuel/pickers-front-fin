{"ast":null,"code":"import { getGlobalObject } from './global'; // TODO: Implement different loggers for different environments\n\nvar global = getGlobalObject();\n/** Prefix for logging strings */\n\nvar PREFIX = 'Sentry Logger ';\n/**\n * Temporarily unwrap `console.log` and friends in order to perform the given callback using the original methods.\n * Restores wrapping after the callback completes.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\n\nexport function consoleSandbox(callback) {\n  var global = getGlobalObject();\n  var levels = ['debug', 'info', 'warn', 'error', 'log', 'assert'];\n\n  if (!('console' in global)) {\n    return callback();\n  } // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\n\n  var originalConsole = global.console;\n  var wrappedLevels = {}; // Restore all wrapped console methods\n\n  levels.forEach(function (level) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (level in global.console && originalConsole[level].__sentry_original__) {\n      wrappedLevels[level] = originalConsole[level];\n      originalConsole[level] = originalConsole[level].__sentry_original__;\n    }\n  }); // Perform callback manipulations\n\n  var result = callback(); // Revert restoration to wrapped state\n\n  Object.keys(wrappedLevels).forEach(function (level) {\n    originalConsole[level] = wrappedLevels[level];\n  });\n  return result;\n}\n/** JSDoc */\n\nvar Logger =\n/** @class */\nfunction () {\n  /** JSDoc */\n  function Logger() {\n    this._enabled = false;\n  }\n  /** JSDoc */\n\n\n  Logger.prototype.disable = function () {\n    this._enabled = false;\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.enable = function () {\n    this._enabled = true;\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.log = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.log(PREFIX + \"[Log]: \" + args.join(' '));\n    });\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.warn = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.warn(PREFIX + \"[Warn]: \" + args.join(' '));\n    });\n  };\n  /** JSDoc */\n\n\n  Logger.prototype.error = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (!this._enabled) {\n      return;\n    }\n\n    consoleSandbox(function () {\n      global.console.error(PREFIX + \"[Error]: \" + args.join(' '));\n    });\n  };\n\n  return Logger;\n}(); // Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\n\n\nglobal.__SENTRY__ = global.__SENTRY__ || {};\nvar logger = global.__SENTRY__.logger || (global.__SENTRY__.logger = new Logger());\nexport { logger };","map":{"version":3,"sources":["../src/logger.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { WrappedFunction } from '@sentry/types';\n\nimport { getGlobalObject } from './global';\n\n// TODO: Implement different loggers for different environments\nconst global = getGlobalObject<Window | NodeJS.Global>();\n\n/** Prefix for logging strings */\nconst PREFIX = 'Sentry Logger ';\n\n/** JSDoc */\ninterface ExtensibleConsole extends Console {\n  [key: string]: any;\n}\n\n/**\n * Temporarily unwrap `console.log` and friends in order to perform the given callback using the original methods.\n * Restores wrapping after the callback completes.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\nexport function consoleSandbox(callback: () => any): any {\n  const global = getGlobalObject<Window>();\n  const levels = ['debug', 'info', 'warn', 'error', 'log', 'assert'];\n\n  if (!('console' in global)) {\n    return callback();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const originalConsole = (global as any).console as ExtensibleConsole;\n  const wrappedLevels: { [key: string]: any } = {};\n\n  // Restore all wrapped console methods\n  levels.forEach(level => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (level in (global as any).console && (originalConsole[level] as WrappedFunction).__sentry_original__) {\n      wrappedLevels[level] = originalConsole[level] as WrappedFunction;\n      originalConsole[level] = (originalConsole[level] as WrappedFunction).__sentry_original__;\n    }\n  });\n\n  // Perform callback manipulations\n  const result = callback();\n\n  // Revert restoration to wrapped state\n  Object.keys(wrappedLevels).forEach(level => {\n    originalConsole[level] = wrappedLevels[level];\n  });\n\n  return result;\n}\n\n/** JSDoc */\nclass Logger {\n  /** JSDoc */\n  private _enabled: boolean;\n\n  /** JSDoc */\n  public constructor() {\n    this._enabled = false;\n  }\n\n  /** JSDoc */\n  public disable(): void {\n    this._enabled = false;\n  }\n\n  /** JSDoc */\n  public enable(): void {\n    this._enabled = true;\n  }\n\n  /** JSDoc */\n  public log(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.log(`${PREFIX}[Log]: ${args.join(' ')}`);\n    });\n  }\n\n  /** JSDoc */\n  public warn(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.warn(`${PREFIX}[Warn]: ${args.join(' ')}`);\n    });\n  }\n\n  /** JSDoc */\n  public error(...args: any[]): void {\n    if (!this._enabled) {\n      return;\n    }\n    consoleSandbox(() => {\n      global.console.error(`${PREFIX}[Error]: ${args.join(' ')}`);\n    });\n  }\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nglobal.__SENTRY__ = global.__SENTRY__ || {};\nconst logger = (global.__SENTRY__.logger as Logger) || (global.__SENTRY__.logger = new Logger());\n\nexport { logger };\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}