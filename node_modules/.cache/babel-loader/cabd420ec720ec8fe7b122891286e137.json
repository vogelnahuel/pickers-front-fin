{"ast":null,"code":"var _jsxFileName = \"/home/nahuel/pickers-admin-front/src/component/admin/ExpandableFile/ExpandableFile.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from \"react\";\nimport i18next from \"i18next\";\nimport { connect } from \"react-redux\";\nimport { Tooltip, ToolTipPosition, Collapsible } from \"@pickit/pickit-components\";\nimport { DETAIL_PICKER_TAG, PICKERS_MAX_FILE_SIZE, PICKERS_FILE_EXT } from \"utils/constants\";\nimport { actions as detailPickerActions } from \"../../../reducers/detailPicker\";\nimport \"./ExpandableFile.scss\";\nimport { toBase64 } from \"utils/toBase64\";\nimport { detailPickerSelector } from \"reducers/detailPicker\";\nimport { pickersSelector } from \"reducers/pickers\";\nimport Confirm from \"../Confirm/Confirm\";\nimport classNames from \"classnames\";\nimport { ReactComponent as ErrorIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/folder-error.svg\";\nimport { ReactComponent as CompleteIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/folder-complete.svg\";\nimport { ReactComponent as AddIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/folder-add.svg\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/file-delete.svg\";\nimport { ReactComponent as ReplaceIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/file-replace.svg\";\nimport { ReactComponent as LoadIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/admin/file-load.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst tagInitialState = {\n  \"dni-front\": false,\n  \"dni-back\": false,\n  \"user-face\": false,\n  \"cbu-certificate\": false,\n  \"cuit-certificate\": false,\n  \"driver-license\": false,\n  \"vehicle-identification-back\": false,\n  \"vehicle-identification-front\": false,\n  \"driver-insurance-card\": false\n};\nconst tagConfirmInitialState = {\n  \"dni-front\": {\n    delete: false,\n    replace: false\n  },\n  \"dni-back\": {\n    delete: false,\n    replace: false\n  },\n  \"user-face\": {\n    delete: false,\n    replace: false\n  },\n  \"cbu-certificate\": {\n    delete: false,\n    replace: false\n  },\n  \"cuit-certificate\": {\n    delete: false,\n    replace: false\n  },\n  \"driver-license\": {\n    delete: false,\n    replace: false\n  },\n  \"vehicle-identification-back\": {\n    delete: false,\n    replace: false\n  },\n  \"vehicle-identification-front\": {\n    delete: false,\n    replace: false\n  },\n  \"driver-insurance-card\": {\n    delete: false,\n    replace: false\n  }\n};\nconst labelsConfirm = [\"expandableFile:label.card.deleteFile\", \"expandableFile:label.card.replaceFile\"];\nconst initialState = {\n  loadTag: tagInitialState,\n  sizeTag: tagInitialState,\n  formatTag: tagInitialState\n};\n\nconst ExpandableFile = _ref => {\n  _s();\n\n  let {\n    files,\n    pickerId,\n    openFile,\n    saveFile,\n    setWrongFile,\n    serverError,\n    actualPage,\n    deleteFile\n  } = _ref;\n  const [viewConfirm, setViewConfirm] = useState(tagConfirmInitialState);\n  const [open, setOpen] = useState(false);\n  const [error, setError] = useState(initialState);\n\n  const optionYes = tag => {\n    var _viewConfirm$tag;\n\n    if ((_viewConfirm$tag = viewConfirm[tag]) !== null && _viewConfirm$tag !== void 0 && _viewConfirm$tag.delete) {\n      deleteFile({\n        id: pickerId,\n        tag: tag\n      });\n      resetTag(tag);\n      setViewConfirm({ ...viewConfirm,\n        [tag]: { ...viewConfirm[tag],\n          delete: !viewConfirm[tag].delete\n        }\n      });\n    } else {\n      var _viewConfirm$tag2;\n\n      uploadFile(false, tag);\n      setViewConfirm({ ...viewConfirm,\n        [tag]: { ...viewConfirm[tag],\n          replace: !((_viewConfirm$tag2 = viewConfirm[tag]) !== null && _viewConfirm$tag2 !== void 0 && _viewConfirm$tag2.replace)\n        }\n      });\n    }\n  };\n\n  const optionNo = tag => {\n    setViewConfirm({ ...viewConfirm,\n      [tag]: {\n        delete: false,\n        replace: false\n      }\n    });\n  };\n\n  const resetTag = element => {\n    if (setWrongFile) setWrongFile({\n      type: element,\n      value: false\n    });\n    setError(err => ({ ...err,\n      loadTag: { ...err.loadTag,\n        [element]: false\n      },\n      sizeTag: { ...err.sizeTag,\n        [element]: false\n      },\n      formatTag: { ...err.formatTag,\n        [element]: false\n      }\n    }));\n  };\n\n  const setErrorTag = (tag, element) => {\n    if (setWrongFile) setWrongFile({\n      type: element,\n      value: true\n    });\n    setError(err => ({ ...err,\n      loadTag: { ...err.loadTag,\n        [element]: false\n      },\n      sizeTag: { ...err.sizeTag,\n        [element]: false\n      },\n      formatTag: { ...err.formatTag,\n        [element]: false\n      },\n      [tag]: { ...err[tag],\n        [element]: true\n      }\n    }));\n  };\n\n  const hasError = element => {\n    return error[\"sizeTag\"][element] || error[\"loadTag\"][element] || error[\"formatTag\"][element] || serverError.includes(element);\n  };\n\n  const hasCardError = () => {\n    const sizeTag = Object.values(error.sizeTag).some(v => v);\n    const loadTag = Object.values(error.loadTag).some(v => v);\n    const formatTag = Object.values(error.formatTag).some(v => v);\n    const serverTag = files.content.find(c => serverError.includes(c.tag));\n    return sizeTag || loadTag || formatTag || serverTag;\n  };\n\n  const verifyError = async (event, element) => {\n    const target = event.target;\n    const file = target.files[0];\n    if (!file) return; // si el valor del value es el mismo no hace el onchange\n\n    const inputFile = document.getElementById(`file-${element}`);\n    if (inputFile) inputFile.value = \"\";\n\n    if (!PICKERS_FILE_EXT.includes(file.type)) {\n      setErrorTag(\"formatTag\", element);\n      return;\n    }\n\n    if (file.size > PICKERS_MAX_FILE_SIZE) {\n      setErrorTag(\"sizeTag\", element);\n      return;\n    }\n\n    try {\n      const base64 = await toBase64(file);\n      resetTag(element);\n      saveFile({\n        id: pickerId,\n        tag: element,\n        content: base64\n      });\n    } catch (error) {\n      setErrorTag(\"loadTag\", element);\n    }\n  };\n\n  const uploadFile = (isUpload, tag) => {\n    const inputFile = document.getElementById(`file-${tag}`);\n\n    if (!isUpload && inputFile) {\n      inputFile.click();\n    } else {\n      setViewConfirm({ ...viewConfirm,\n        [tag]: {\n          delete: false,\n          replace: !viewConfirm[tag].replace\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"border-row\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classNames({\n        \"background-error\": !open && hasCardError()\n      }),\n      children: /*#__PURE__*/_jsxDEV(Collapsible, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setOpen(prev => !prev),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header\",\n            children: [hasCardError() ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-icon display-flex \",\n              children: /*#__PURE__*/_jsxDEV(ErrorIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this) : (files === null || files === void 0 ? void 0 : files.status) === \"EMPTY\" || (files === null || files === void 0 ? void 0 : files.status) === \"PENDING\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"add-icon display-flex \",\n              children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"complete-icon display-flex \",\n              children: /*#__PURE__*/_jsxDEV(CompleteIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: !hasCardError() ? \"paragraph-expandable-file\" : \"paragraph-expandable-file color-error\",\n              children: i18next.t(\"expandableFile:label.card.file\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-detailPicker-row \",\n          children: files === null || files === void 0 ? void 0 : files.content.map(element => {\n            var _viewConfirm$element$, _viewConfirm$element$2, _viewConfirm$element$3;\n\n            return /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container-detailPicker-col-sm-8 file-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: element.isUpload && !hasError(element.tag) ? \"\" : !hasError(element.tag) ? \"picker-color-gray\" : \"color-error\",\n                  onClick: () => element.isUpload && openFile && openFile({\n                    pickerId,\n                    tag: element.tag\n                  }),\n                  children: i18next.t(DETAIL_PICKER_TAG[element.tag])\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"container-img-picker\",\n                  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [element.isUpload ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                        position: ToolTipPosition.bottom,\n                        message: i18next.t(\"expandableFile:label.tooltip.replace\"),\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"container-icon replace\",\n                          onClick: e => uploadFile(element.isUpload, element.tag),\n                          children: /*#__PURE__*/_jsxDEV(ReplaceIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 288,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 282,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 276,\n                        columnNumber: 27\n                      }, this), actualPage === \"PENDING\" && /*#__PURE__*/_jsxDEV(Tooltip, {\n                        position: ToolTipPosition.bottom,\n                        message: i18next.t(\"expandableFile:label.tooltip.delete\"),\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"container-icon delete\",\n                          onClick: () => {\n                            setViewConfirm({ ...viewConfirm,\n                              [element.tag]: {\n                                delete: !viewConfirm[element.tag].delete,\n                                replace: false\n                              }\n                            });\n                          },\n                          children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 310,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 292,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(Tooltip, {\n                      position: ToolTipPosition.bottom,\n                      message: i18next.t(\"expandableFile:label.tooltip.load\"),\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"container-icon load\",\n                        onClick: () => uploadFile(element.isUpload, element.tag),\n                        children: /*#__PURE__*/_jsxDEV(LoadIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 328,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 322,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 316,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      id: `file-${element.tag}`,\n                      className: \"display-none\",\n                      type: \"file\",\n                      accept: \".png,.jpg,.pdf\",\n                      onChange: event => verifyError(event, element.tag)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 333,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container-detailPicker-col-sm-12 display-flex\",\n                children: (_viewConfirm$element$ = viewConfirm[element.tag]) !== null && _viewConfirm$element$ !== void 0 && _viewConfirm$element$.delete || (_viewConfirm$element$2 = viewConfirm[element.tag]) !== null && _viewConfirm$element$2 !== void 0 && _viewConfirm$element$2.replace ? /*#__PURE__*/_jsxDEV(Confirm, {\n                  question: (_viewConfirm$element$3 = viewConfirm[element.tag]) !== null && _viewConfirm$element$3 !== void 0 && _viewConfirm$element$3.delete ? i18next.t(labelsConfirm[0]) : i18next.t(labelsConfirm[1]),\n                  optionYes: () => optionYes(element.tag),\n                  optionNo: () => optionNo(element.tag)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 21\n                }, this) : error[\"formatTag\"][element.tag] ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"p-error\",\n                  children: i18next.t(\"expandableFile:label.card.ErrorFormat\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, this) : error[\"sizeTag\"][element.tag] ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"p-error \",\n                  children: i18next.t(\"expandableFile:label.card.ErrorSize\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this) : error[\"loadTag\"][element.tag] ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"p-error\",\n                  children: i18next.t(\"expandableFile:label.card.ErrorLoad\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this) : serverError.includes(element.tag) && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"p-error \",\n                  children: i18next.t(\"expandableFile:label.card.ErrorServer\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this)]\n            }, element.tag, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ExpandableFile, \"uUbxKNuUNnwM7Nk9lEHa5g6mqz4=\");\n\n_c = ExpandableFile;\n\nconst mapStateToProps = state => ({\n  serverError: detailPickerSelector(state).serverError,\n  actualPage: pickersSelector(state).actualPage\n});\n\nconst mapDispatchToProps = dispatch => ({\n  openFile: params => {\n    dispatch(detailPickerActions.getPickerFileRequest(params));\n  },\n  saveFile: params => {\n    dispatch(detailPickerActions.getPickerFileSaveRequest(params));\n  },\n  deleteFile: params => {\n    dispatch(detailPickerActions.getPickerFileDeleteRequest(params));\n  },\n  setWrongFile: wrongFile => {\n    dispatch(detailPickerActions.setWrongFile(wrongFile));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExpandableFile);\n\nvar _c;\n\n$RefreshReg$(_c, \"ExpandableFile\");","map":{"version":3,"sources":["/home/nahuel/pickers-admin-front/src/component/admin/ExpandableFile/ExpandableFile.tsx"],"names":["React","Fragment","useState","i18next","connect","Tooltip","ToolTipPosition","Collapsible","DETAIL_PICKER_TAG","PICKERS_MAX_FILE_SIZE","PICKERS_FILE_EXT","actions","detailPickerActions","toBase64","detailPickerSelector","pickersSelector","Confirm","classNames","tagInitialState","tagConfirmInitialState","delete","replace","labelsConfirm","initialState","loadTag","sizeTag","formatTag","ExpandableFile","files","pickerId","openFile","saveFile","setWrongFile","serverError","actualPage","deleteFile","viewConfirm","setViewConfirm","open","setOpen","error","setError","optionYes","tag","id","resetTag","uploadFile","optionNo","element","type","value","err","setErrorTag","hasError","includes","hasCardError","Object","values","some","v","serverTag","content","find","c","verifyError","event","target","file","inputFile","document","getElementById","size","base64","isUpload","click","prev","status","t","map","bottom","e","mapStateToProps","state","mapDispatchToProps","dispatch","params","getPickerFileRequest","getPickerFileSaveRequest","getPickerFileDeleteRequest","wrongFile"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SACEC,OADF,EAEEC,eAFF,EAGEC,WAHF,QAIO,2BAJP;AAKA,SACEC,iBADF,EAEEC,qBAFF,EAGEC,gBAHF,QAIO,iBAJP;AAMA,SAASC,OAAO,IAAIC,mBAApB,QAA+C,gCAA/C;AACA,OAAO,uBAAP;AAWA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,oBAAT,QAAqC,uBAArC;AACA,SAASC,eAAT,QAAgC,kBAAhC;AAEA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;;;;;;;;AASA,MAAMC,eAA8B,GAAG;AACrC,eAAa,KADwB;AAErC,cAAY,KAFyB;AAGrC,eAAa,KAHwB;AAIrC,qBAAmB,KAJkB;AAKrC,sBAAoB,KALiB;AAMrC,oBAAkB,KANmB;AAOrC,iCAA+B,KAPM;AAQrC,kCAAgC,KARK;AASrC,2BAAyB;AATY,CAAvC;AAWA,MAAMC,sBAA0C,GAAG;AACjD,eAAa;AAAEC,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GADoC;AAEjD,cAAY;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAFqC;AAGjD,eAAa;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAHoC;AAIjD,qBAAmB;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAJ8B;AAKjD,sBAAoB;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAL6B;AAMjD,oBAAkB;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAN+B;AAOjD,iCAA+B;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAPkB;AAQjD,kCAAgC;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GARiB;AASjD,2BAAyB;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,OAAO,EAAE;AAA1B;AATwB,CAAnD;AAYA,MAAMC,aAAa,GAAG,CACpB,sCADoB,EAEpB,uCAFoB,CAAtB;AAKA,MAAMC,YAAqC,GAAG;AAC5CC,EAAAA,OAAO,EAAEN,eADmC;AAE5CO,EAAAA,OAAO,EAAEP,eAFmC;AAG5CQ,EAAAA,SAAS,EAAER;AAHiC,CAA9C;;AAMA,MAAMS,cAAiD,GAAG,QASpD;AAAA;;AAAA,MATqD;AACzDC,IAAAA,KADyD;AAEzDC,IAAAA,QAFyD;AAGzDC,IAAAA,QAHyD;AAIzDC,IAAAA,QAJyD;AAKzDC,IAAAA,YALyD;AAMzDC,IAAAA,WANyD;AAOzDC,IAAAA,UAPyD;AAQzDC,IAAAA;AARyD,GASrD;AACJ,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCnC,QAAQ,CAACiB,sBAAD,CAA9C;AACA,QAAM,CAACmB,IAAD,EAAOC,OAAP,IAAkBrC,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACsC,KAAD,EAAQC,QAAR,IAAoBvC,QAAQ,CAAsBqB,YAAtB,CAAlC;;AAEA,QAAMmB,SAAS,GAAIC,GAAD,IAAwC;AAAA;;AACxD,4BAAIP,WAAW,CAACO,GAAD,CAAf,6CAAI,iBAAkBvB,MAAtB,EAA8B;AAC5Be,MAAAA,UAAU,CAAC;AAAES,QAAAA,EAAE,EAAEf,QAAN;AAAgBc,QAAAA,GAAG,EAAEA;AAArB,OAAD,CAAV;AACAE,MAAAA,QAAQ,CAACF,GAAD,CAAR;AACAN,MAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,SAACO,GAAD,GAAO,EACL,GAAGP,WAAW,CAACO,GAAD,CADT;AAELvB,UAAAA,MAAM,EAAE,CAACgB,WAAW,CAACO,GAAD,CAAX,CAAiBvB;AAFrB;AAFM,OAAD,CAAd;AAOD,KAVD,MAUO;AAAA;;AACL0B,MAAAA,UAAU,CAAC,KAAD,EAAQH,GAAR,CAAV;AACAN,MAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,SAACO,GAAD,GAAO,EACL,GAAGP,WAAW,CAACO,GAAD,CADT;AAELtB,UAAAA,OAAO,EAAE,uBAACe,WAAW,CAACO,GAAD,CAAZ,8CAAC,kBAAkBtB,OAAnB;AAFJ;AAFM,OAAD,CAAd;AAOD;AACF,GArBD;;AAsBA,QAAM0B,QAAQ,GAAIJ,GAAD,IAAwC;AACvDN,IAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,OAACO,GAAD,GAAO;AACLvB,QAAAA,MAAM,EAAE,KADH;AAELC,QAAAA,OAAO,EAAE;AAFJ;AAFM,KAAD,CAAd;AAOD,GARD;;AAUA,QAAMwB,QAAQ,GAAIG,OAAD,IAA4C;AAC3D,QAAIhB,YAAJ,EAAkBA,YAAY,CAAC;AAAEiB,MAAAA,IAAI,EAAED,OAAR;AAAiBE,MAAAA,KAAK,EAAE;AAAxB,KAAD,CAAZ;AAClBT,IAAAA,QAAQ,CAAEU,GAAD,KAA+B,EACtC,GAAGA,GADmC;AAEtC3B,MAAAA,OAAO,EAAE,EAAE,GAAG2B,GAAG,CAAC3B,OAAT;AAAkB,SAACwB,OAAD,GAAW;AAA7B,OAF6B;AAGtCvB,MAAAA,OAAO,EAAE,EAAE,GAAG0B,GAAG,CAAC1B,OAAT;AAAkB,SAACuB,OAAD,GAAW;AAA7B,OAH6B;AAItCtB,MAAAA,SAAS,EAAE,EAAE,GAAGyB,GAAG,CAACzB,SAAT;AAAoB,SAACsB,OAAD,GAAW;AAA/B;AAJ2B,KAA/B,CAAD,CAAR;AAMD,GARD;;AAUA,QAAMI,WAAW,GAAG,CAClBT,GADkB,EAElBK,OAFkB,KAGf;AACH,QAAIhB,YAAJ,EAAkBA,YAAY,CAAC;AAAEiB,MAAAA,IAAI,EAAED,OAAR;AAAiBE,MAAAA,KAAK,EAAE;AAAxB,KAAD,CAAZ;AAClBT,IAAAA,QAAQ,CAAEU,GAAD,KAA+B,EACtC,GAAGA,GADmC;AAEtC3B,MAAAA,OAAO,EAAE,EAAE,GAAG2B,GAAG,CAAC3B,OAAT;AAAkB,SAACwB,OAAD,GAAW;AAA7B,OAF6B;AAGtCvB,MAAAA,OAAO,EAAE,EAAE,GAAG0B,GAAG,CAAC1B,OAAT;AAAkB,SAACuB,OAAD,GAAW;AAA7B,OAH6B;AAItCtB,MAAAA,SAAS,EAAE,EAAE,GAAGyB,GAAG,CAACzB,SAAT;AAAoB,SAACsB,OAAD,GAAW;AAA/B,OAJ2B;AAKtC,OAACL,GAAD,GAAO,EAAE,GAAGQ,GAAG,CAACR,GAAD,CAAR;AAAe,SAACK,OAAD,GAAW;AAA1B;AAL+B,KAA/B,CAAD,CAAR;AAOD,GAZD;;AAcA,QAAMK,QAAQ,GAAIL,OAAD,IAA4C;AAC3D,WACER,KAAK,CAAC,SAAD,CAAL,CAAiBQ,OAAjB,KACAR,KAAK,CAAC,SAAD,CAAL,CAAiBQ,OAAjB,CADA,IAEAR,KAAK,CAAC,WAAD,CAAL,CAAmBQ,OAAnB,CAFA,IAGAf,WAAW,CAACqB,QAAZ,CAAqBN,OAArB,CAJF;AAMD,GAPD;;AASA,QAAMO,YAAY,GAAG,MAAM;AACzB,UAAM9B,OAAO,GAAG+B,MAAM,CAACC,MAAP,CAAcjB,KAAK,CAACf,OAApB,EAA6BiC,IAA7B,CAAmCC,CAAD,IAAOA,CAAzC,CAAhB;AACA,UAAMnC,OAAO,GAAGgC,MAAM,CAACC,MAAP,CAAcjB,KAAK,CAAChB,OAApB,EAA6BkC,IAA7B,CAAmCC,CAAD,IAAOA,CAAzC,CAAhB;AACA,UAAMjC,SAAS,GAAG8B,MAAM,CAACC,MAAP,CAAcjB,KAAK,CAACd,SAApB,EAA+BgC,IAA/B,CAAqCC,CAAD,IAAOA,CAA3C,CAAlB;AACA,UAAMC,SAAS,GAAGhC,KAAK,CAACiC,OAAN,CAAcC,IAAd,CAAoBC,CAAD,IAAO9B,WAAW,CAACqB,QAAZ,CAAqBS,CAAC,CAACpB,GAAvB,CAA1B,CAAlB;AACA,WAAOlB,OAAO,IAAID,OAAX,IAAsBE,SAAtB,IAAmCkC,SAA1C;AACD,GAND;;AAQA,QAAMI,WAAW,GAAG,OAClBC,KADkB,EAElBjB,OAFkB,KAGf;AACH,UAAMkB,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMC,IAAU,GAAID,MAAM,CAACtC,KAAR,CAA2B,CAA3B,CAAnB;AACA,QAAI,CAACuC,IAAL,EAAW,OAHR,CAKH;;AACA,UAAMC,SAAS,GAAGC,QAAQ,CAACC,cAAT,CACf,QAAOtB,OAAQ,EADA,CAAlB;AAGA,QAAIoB,SAAJ,EAAeA,SAAS,CAAClB,KAAV,GAAkB,EAAlB;;AAEf,QAAI,CAACxC,gBAAgB,CAAC4C,QAAjB,CAA0Ba,IAAI,CAAClB,IAA/B,CAAL,EAA2C;AACzCG,MAAAA,WAAW,CAAC,WAAD,EAAcJ,OAAd,CAAX;AACA;AACD;;AAED,QAAImB,IAAI,CAACI,IAAL,GAAY9D,qBAAhB,EAAuC;AACrC2C,MAAAA,WAAW,CAAC,SAAD,EAAYJ,OAAZ,CAAX;AACA;AACD;;AAED,QAAI;AACF,YAAMwB,MAAM,GAAG,MAAM3D,QAAQ,CAACsD,IAAD,CAA7B;AAEAtB,MAAAA,QAAQ,CAACG,OAAD,CAAR;AACAjB,MAAAA,QAAQ,CAAC;AACPa,QAAAA,EAAE,EAAEf,QADG;AAEPc,QAAAA,GAAG,EAAEK,OAFE;AAGPa,QAAAA,OAAO,EAAEW;AAHF,OAAD,CAAR;AAKD,KATD,CASE,OAAOhC,KAAP,EAAc;AACdY,MAAAA,WAAW,CAAC,SAAD,EAAYJ,OAAZ,CAAX;AACD;AACF,GApCD;;AAsCA,QAAMF,UAAU,GAAG,CACjB2B,QADiB,EAEjB9B,GAFiB,KAGd;AACH,UAAMyB,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAyB,QAAO3B,GAAI,EAApC,CAAlB;;AACA,QAAI,CAAC8B,QAAD,IAAaL,SAAjB,EAA4B;AAC1BA,MAAAA,SAAS,CAACM,KAAV;AACD,KAFD,MAEO;AACLrC,MAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,SAACO,GAAD,GAAO;AAAEvB,UAAAA,MAAM,EAAE,KAAV;AAAiBC,UAAAA,OAAO,EAAE,CAACe,WAAW,CAACO,GAAD,CAAX,CAAiBtB;AAA5C;AAFM,OAAD,CAAd;AAID;AACF,GAbD;;AAeA,sBACE;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AACE,MAAA,SAAS,EAAEJ,UAAU,CAAC;AACpB,4BAAoB,CAACqB,IAAD,IAASiB,YAAY;AADrB,OAAD,CADvB;AAAA,6BAKE,QAAC,WAAD;AAAA,gCACE;AAAK,UAAA,OAAO,EAAE,MAAMhB,OAAO,CAAEoC,IAAD,IAAU,CAACA,IAAZ,CAA3B;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA,uBACGpB,YAAY,kBACX;AAAK,cAAA,SAAS,EAAC,0BAAf;AAAA,qCACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADW,GAIT,CAAA3B,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEgD,MAAP,MAAkB,OAAlB,IAA6B,CAAAhD,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEgD,MAAP,MAAkB,SAA/C,gBACF;AAAK,cAAA,SAAS,EAAC,wBAAf;AAAA,qCACE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADE,gBAKF;AAAK,cAAA,SAAS,EAAC,6BAAf;AAAA,qCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAVJ,eAeE;AACE,cAAA,SAAS,EACP,CAACrB,YAAY,EAAb,GACI,2BADJ,GAEI,uCAJR;AAAA,wBAOGpD,OAAO,CAAC0E,CAAR,CAAU,gCAAV;AAPH;AAAA;AAAA;AAAA;AAAA,oBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eA6BE;AAAK,UAAA,SAAS,EAAC,6BAAf;AAAA,oBACGjD,KADH,aACGA,KADH,uBACGA,KAAK,CAAEiC,OAAP,CAAeiB,GAAf,CAAoB9B,OAAD;AAAA;;AAAA,gCAClB,QAAC,QAAD;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,gDAAf;AAAA,wCACE;AACE,kBAAA,SAAS,EACPA,OAAO,CAACyB,QAAR,IAAoB,CAACpB,QAAQ,CAACL,OAAO,CAACL,GAAT,CAA7B,GACI,EADJ,GAEI,CAACU,QAAQ,CAACL,OAAO,CAACL,GAAT,CAAT,GACA,mBADA,GAEA,aANR;AAQE,kBAAA,OAAO,EAAE,MACPK,OAAO,CAACyB,QAAR,IACA3C,QADA,IAEAA,QAAQ,CAAC;AAAED,oBAAAA,QAAF;AAAYc,oBAAAA,GAAG,EAAEK,OAAO,CAACL;AAAzB,mBAAD,CAXZ;AAAA,4BAcGxC,OAAO,CAAC0E,CAAR,CAAUrE,iBAAiB,CAACwC,OAAO,CAACL,GAAT,CAA3B;AAdH;AAAA;AAAA;AAAA;AAAA,wBADF,eAiBE;AAAK,kBAAA,SAAS,EAAC,sBAAf;AAAA,yCACE;AAAA,+BACGK,OAAO,CAACyB,QAAR,gBACC;AAAA,8CACE,QAAC,OAAD;AACE,wBAAA,QAAQ,EAAEnE,eAAe,CAACyE,MAD5B;AAEE,wBAAA,OAAO,EAAE5E,OAAO,CAAC0E,CAAR,CACP,sCADO,CAFX;AAAA,+CAME;AACE,0BAAA,SAAS,EAAC,wBADZ;AAEE,0BAAA,OAAO,EAAGG,CAAD,IACPlC,UAAU,CAACE,OAAO,CAACyB,QAAT,EAAmBzB,OAAO,CAACL,GAA3B,CAHd;AAAA,iDAME,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,8BADF,EAgBGT,UAAU,KAAK,SAAf,iBACC,QAAC,OAAD;AACE,wBAAA,QAAQ,EAAE5B,eAAe,CAACyE,MAD5B;AAEE,wBAAA,OAAO,EAAE5E,OAAO,CAAC0E,CAAR,CACP,qCADO,CAFX;AAAA,+CAME;AACE,0BAAA,SAAS,EAAC,uBADZ;AAEE,0BAAA,OAAO,EAAE,MAAM;AACbxC,4BAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEb,+BAACY,OAAO,CAACL,GAAT,GAAe;AACbvB,gCAAAA,MAAM,EAAE,CAACgB,WAAW,CAACY,OAAO,CAACL,GAAT,CAAX,CAAyBvB,MADrB;AAEbC,gCAAAA,OAAO,EAAE;AAFI;AAFF,6BAAD,CAAd;AAOD,2BAVH;AAAA,iDAYE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,8BAjBJ;AAAA,oCADD,gBA0CC,QAAC,OAAD;AACE,sBAAA,QAAQ,EAAEf,eAAe,CAACyE,MAD5B;AAEE,sBAAA,OAAO,EAAE5E,OAAO,CAAC0E,CAAR,CACP,mCADO,CAFX;AAAA,6CAME;AACE,wBAAA,SAAS,EAAC,qBADZ;AAEE,wBAAA,OAAO,EAAE,MACP/B,UAAU,CAACE,OAAO,CAACyB,QAAT,EAAmBzB,OAAO,CAACL,GAA3B,CAHd;AAAA,+CAME,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,4BA3CJ,eA4DE;AACE,sBAAA,EAAE,EAAG,QAAOK,OAAO,CAACL,GAAI,EAD1B;AAEE,sBAAA,SAAS,EAAC,cAFZ;AAGE,sBAAA,IAAI,EAAC,MAHP;AAIE,sBAAA,MAAM,EAAC,gBAJT;AAKE,sBAAA,QAAQ,EAAGsB,KAAD,IACRD,WAAW,CAACC,KAAD,EAAQjB,OAAO,CAACL,GAAhB;AANf;AAAA;AAAA;AAAA;AAAA,4BA5DF;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAjBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eA2FE;AAAK,gBAAA,SAAS,EAAC,+CAAf;AAAA,0BACG,yBAAAP,WAAW,CAACY,OAAO,CAACL,GAAT,CAAX,wEAA0BvB,MAA1B,8BACDgB,WAAW,CAACY,OAAO,CAACL,GAAT,CADV,mDACD,uBAA0BtB,OADzB,gBAEC,QAAC,OAAD;AACE,kBAAA,QAAQ,EACN,0BAAAe,WAAW,CAACY,OAAO,CAACL,GAAT,CAAX,0EAA0BvB,MAA1B,GACIjB,OAAO,CAAC0E,CAAR,CAAUvD,aAAa,CAAC,CAAD,CAAvB,CADJ,GAEInB,OAAO,CAAC0E,CAAR,CAAUvD,aAAa,CAAC,CAAD,CAAvB,CAJR;AAME,kBAAA,SAAS,EAAE,MAAMoB,SAAS,CAACM,OAAO,CAACL,GAAT,CAN5B;AAOE,kBAAA,QAAQ,EAAE,MAAMI,QAAQ,CAACC,OAAO,CAACL,GAAT;AAP1B;AAAA;AAAA;AAAA;AAAA,wBAFD,GAWGH,KAAK,CAAC,WAAD,CAAL,CAAmBQ,OAAO,CAACL,GAA3B,iBACF;AAAG,kBAAA,SAAS,EAAC,SAAb;AAAA,4BACGxC,OAAO,CAAC0E,CAAR,CAAU,uCAAV;AADH;AAAA;AAAA;AAAA;AAAA,wBADE,GAIArC,KAAK,CAAC,SAAD,CAAL,CAAiBQ,OAAO,CAACL,GAAzB,iBACF;AAAG,kBAAA,SAAS,EAAC,UAAb;AAAA,4BACGxC,OAAO,CAAC0E,CAAR,CAAU,qCAAV;AADH;AAAA;AAAA;AAAA;AAAA,wBADE,GAIArC,KAAK,CAAC,SAAD,CAAL,CAAiBQ,OAAO,CAACL,GAAzB,iBACF;AAAG,kBAAA,SAAS,EAAC,SAAb;AAAA,4BACGxC,OAAO,CAAC0E,CAAR,CAAU,qCAAV;AADH;AAAA;AAAA;AAAA;AAAA,wBADE,GAKF5C,WAAW,CAACqB,QAAZ,CAAqBN,OAAO,CAACL,GAA7B,kBACE;AAAG,kBAAA,SAAS,EAAC,UAAb;AAAA,4BACGxC,OAAO,CAAC0E,CAAR,CAAU,uCAAV;AADH;AAAA;AAAA;AAAA;AAAA;AA1BN;AAAA;AAAA;AAAA;AAAA,sBA3FF;AAAA,eAAe7B,OAAO,CAACL,GAAvB;AAAA;AAAA;AAAA;AAAA,oBADkB;AAAA,WAAnB;AADH;AAAA;AAAA;AAAA;AAAA,gBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;AAyKD,CArTD;;GAAMhB,c;;KAAAA,c;;AAsTN,MAAMsD,eAAe,GAAIC,KAAD,KAAuB;AAC7CjD,EAAAA,WAAW,EAAEnB,oBAAoB,CAACoE,KAAD,CAApB,CAA4BjD,WADI;AAE7CC,EAAAA,UAAU,EAAEnB,eAAe,CAACmE,KAAD,CAAf,CAAuBhD;AAFU,CAAvB,CAAxB;;AAIA,MAAMiD,kBAAkB,GAAIC,QAAD,KAA4B;AACrDtD,EAAAA,QAAQ,EAAGuD,MAAD,IAAmC;AAC3CD,IAAAA,QAAQ,CAACxE,mBAAmB,CAAC0E,oBAApB,CAAyCD,MAAzC,CAAD,CAAR;AACD,GAHoD;AAIrDtD,EAAAA,QAAQ,EAAGsD,MAAD,IAA0C;AAClDD,IAAAA,QAAQ,CAACxE,mBAAmB,CAAC2E,wBAApB,CAA6CF,MAA7C,CAAD,CAAR;AACD,GANoD;AAOrDlD,EAAAA,UAAU,EAAGkD,MAAD,IAA4B;AACtCD,IAAAA,QAAQ,CAACxE,mBAAmB,CAAC4E,0BAApB,CAA+CH,MAA/C,CAAD,CAAR;AACD,GAToD;AAUrDrD,EAAAA,YAAY,EAAGyD,SAAD,IAA2C;AACvDL,IAAAA,QAAQ,CAACxE,mBAAmB,CAACoB,YAApB,CAAiCyD,SAAjC,CAAD,CAAR;AACD;AAZoD,CAA5B,CAA3B;;AAcA,eAAerF,OAAO,CAAC6E,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CxD,cAA7C,CAAf","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport i18next from \"i18next\";\nimport { connect } from \"react-redux\";\nimport {\n  Tooltip,\n  ToolTipPosition,\n  Collapsible,\n} from \"@pickit/pickit-components\";\nimport {\n  DETAIL_PICKER_TAG,\n  PICKERS_MAX_FILE_SIZE,\n  PICKERS_FILE_EXT,\n} from \"utils/constants\";\nimport { PickerFileRequestType } from \"../../../pages/pickers/detailPicker/types\";\nimport { actions as detailPickerActions } from \"../../../reducers/detailPicker\";\nimport \"./ExpandableFile.scss\";\nimport { AppDispatch, RootState } from \"store\";\nimport {\n  DeleteFileType,\n  ExpandableFilePropsType,\n  ExpandableFileSaveParamsType,\n  ExpandableFileStateType,\n  TagConfimationType,\n  TagsErrorType,\n} from \"./types\";\nimport { DataContentType, DetailPickerTagFileType } from \"pages/pickers/types\";\nimport { toBase64 } from \"utils/toBase64\";\nimport { detailPickerSelector } from \"reducers/detailPicker\";\nimport { pickersSelector } from \"reducers/pickers\";\nimport { PickerWrongFilePayloadType } from \"reducers/types/detailPicker\";\nimport Confirm from \"../Confirm/Confirm\";\nimport classNames from \"classnames\";\nimport { ReactComponent as ErrorIcon } from \"../../../assets/admin/folder-error.svg\";\nimport { ReactComponent as CompleteIcon } from \"../../../assets/admin/folder-complete.svg\";\nimport { ReactComponent as AddIcon } from \"../../../assets/admin/folder-add.svg\";\n\nimport { ReactComponent as DeleteIcon } from \"../../../assets/admin/file-delete.svg\";\nimport { ReactComponent as ReplaceIcon } from \"../../../assets/admin/file-replace.svg\";\nimport { ReactComponent as LoadIcon } from \"../../../assets/admin/file-load.svg\";\n\nconst tagInitialState: TagsErrorType = {\n  \"dni-front\": false,\n  \"dni-back\": false,\n  \"user-face\": false,\n  \"cbu-certificate\": false,\n  \"cuit-certificate\": false,\n  \"driver-license\": false,\n  \"vehicle-identification-back\": false,\n  \"vehicle-identification-front\": false,\n  \"driver-insurance-card\": false,\n};\nconst tagConfirmInitialState: TagConfimationType = {\n  \"dni-front\": { delete: false, replace: false },\n  \"dni-back\": { delete: false, replace: false },\n  \"user-face\": { delete: false, replace: false },\n  \"cbu-certificate\": { delete: false, replace: false },\n  \"cuit-certificate\": { delete: false, replace: false },\n  \"driver-license\": { delete: false, replace: false },\n  \"vehicle-identification-back\": { delete: false, replace: false },\n  \"vehicle-identification-front\": { delete: false, replace: false },\n  \"driver-insurance-card\": { delete: false, replace: false },\n};\n\nconst labelsConfirm = [\n  \"expandableFile:label.card.deleteFile\",\n  \"expandableFile:label.card.replaceFile\",\n];\n\nconst initialState: ExpandableFileStateType = {\n  loadTag: tagInitialState,\n  sizeTag: tagInitialState,\n  formatTag: tagInitialState,\n};\n\nconst ExpandableFile: React.FC<ExpandableFilePropsType> = ({\n  files,\n  pickerId,\n  openFile,\n  saveFile,\n  setWrongFile,\n  serverError,\n  actualPage,\n  deleteFile,\n}) => {\n  const [viewConfirm, setViewConfirm] = useState(tagConfirmInitialState);\n  const [open, setOpen] = useState(false);\n  const [error, setError] = useState<typeof initialState>(initialState);\n\n  const optionYes = (tag: keyof DetailPickerTagFileType) => {\n    if (viewConfirm[tag]?.delete) {\n      deleteFile({ id: pickerId, tag: tag });\n      resetTag(tag);\n      setViewConfirm({\n        ...viewConfirm,\n        [tag]: {\n          ...viewConfirm[tag],\n          delete: !viewConfirm[tag].delete,\n        },\n      });\n    } else {\n      uploadFile(false, tag);\n      setViewConfirm({\n        ...viewConfirm,\n        [tag]: {\n          ...viewConfirm[tag],\n          replace: !viewConfirm[tag]?.replace,\n        },\n      });\n    }\n  };\n  const optionNo = (tag: keyof DetailPickerTagFileType) => {\n    setViewConfirm({\n      ...viewConfirm,\n      [tag]: {\n        delete: false,\n        replace: false,\n      },\n    });\n  };\n\n  const resetTag = (element: keyof DetailPickerTagFileType) => {\n    if (setWrongFile) setWrongFile({ type: element, value: false });\n    setError((err: typeof initialState) => ({\n      ...err,\n      loadTag: { ...err.loadTag, [element]: false },\n      sizeTag: { ...err.sizeTag, [element]: false },\n      formatTag: { ...err.formatTag, [element]: false },\n    }));\n  };\n\n  const setErrorTag = (\n    tag: keyof typeof initialState,\n    element: keyof DetailPickerTagFileType\n  ) => {\n    if (setWrongFile) setWrongFile({ type: element, value: true });\n    setError((err: typeof initialState) => ({\n      ...err,\n      loadTag: { ...err.loadTag, [element]: false },\n      sizeTag: { ...err.sizeTag, [element]: false },\n      formatTag: { ...err.formatTag, [element]: false },\n      [tag]: { ...err[tag], [element]: true },\n    }));\n  };\n\n  const hasError = (element: keyof DetailPickerTagFileType) => {\n    return (\n      error[\"sizeTag\"][element] ||\n      error[\"loadTag\"][element] ||\n      error[\"formatTag\"][element] ||\n      serverError.includes(element)\n    );\n  };\n\n  const hasCardError = () => {\n    const sizeTag = Object.values(error.sizeTag).some((v) => v);\n    const loadTag = Object.values(error.loadTag).some((v) => v);\n    const formatTag = Object.values(error.formatTag).some((v) => v);\n    const serverTag = files.content.find((c) => serverError.includes(c.tag));\n    return sizeTag || loadTag || formatTag || serverTag;\n  };\n\n  const verifyError = async (\n    event: React.FormEvent<HTMLInputElement>,\n    element: keyof DetailPickerTagFileType\n  ) => {\n    const target = event.target as HTMLInputElement;\n    const file: File = (target.files as FileList)[0];\n    if (!file) return;\n\n    // si el valor del value es el mismo no hace el onchange\n    const inputFile = document.getElementById(\n      `file-${element}`\n    ) as HTMLInputElement;\n    if (inputFile) inputFile.value = \"\";\n\n    if (!PICKERS_FILE_EXT.includes(file.type)) {\n      setErrorTag(\"formatTag\", element);\n      return;\n    }\n\n    if (file.size > PICKERS_MAX_FILE_SIZE) {\n      setErrorTag(\"sizeTag\", element);\n      return;\n    }\n\n    try {\n      const base64 = await toBase64(file);\n\n      resetTag(element);\n      saveFile({\n        id: pickerId,\n        tag: element,\n        content: base64,\n      });\n    } catch (error) {\n      setErrorTag(\"loadTag\", element);\n    }\n  };\n\n  const uploadFile = (\n    isUpload: boolean,\n    tag: keyof DetailPickerTagFileType\n  ) => {\n    const inputFile = document.getElementById(`file-${tag}`);\n    if (!isUpload && inputFile) {\n      inputFile.click();\n    } else {\n      setViewConfirm({\n        ...viewConfirm,\n        [tag]: { delete: false, replace: !viewConfirm[tag].replace },\n      });\n    }\n  };\n\n  return (\n    <>\n      <hr className=\"border-row\" />\n      <div\n        className={classNames({\n          \"background-error\": !open && hasCardError(),\n        })}\n      >\n        <Collapsible>\n          <div onClick={() => setOpen((prev) => !prev)}>\n            <div className=\"header\">\n              {hasCardError() ? (\n                <div className=\"error-icon display-flex \">\n                  <ErrorIcon />\n                </div>\n              ) : files?.status === \"EMPTY\" || files?.status === \"PENDING\" ? (\n                <div className=\"add-icon display-flex \">\n                  <AddIcon />\n                </div>\n              ) : (\n                <div className=\"complete-icon display-flex \">\n                  <CompleteIcon />\n                </div>\n              )}\n\n              <p\n                className={\n                  !hasCardError()\n                    ? \"paragraph-expandable-file\"\n                    : \"paragraph-expandable-file color-error\"\n                }\n              >\n                {i18next.t(\"expandableFile:label.card.file\")}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"container-detailPicker-row \">\n            {files?.content.map((element: DataContentType) => (\n              <Fragment key={element.tag}>\n                <div className=\"container-detailPicker-col-sm-8 file-container\">\n                  <p\n                    className={\n                      element.isUpload && !hasError(element.tag)\n                        ? \"\"\n                        : !hasError(element.tag)\n                        ? \"picker-color-gray\"\n                        : \"color-error\"\n                    }\n                    onClick={() =>\n                      element.isUpload &&\n                      openFile &&\n                      openFile({ pickerId, tag: element.tag })\n                    }\n                  >\n                    {i18next.t(DETAIL_PICKER_TAG[element.tag])}\n                  </p>\n                  <div className=\"container-img-picker\">\n                    <>\n                      {element.isUpload ? (\n                        <>\n                          <Tooltip\n                            position={ToolTipPosition.bottom}\n                            message={i18next.t(\n                              \"expandableFile:label.tooltip.replace\"\n                            )}\n                          >\n                            <div\n                              className=\"container-icon replace\"\n                              onClick={(e) =>\n                                uploadFile(element.isUpload, element.tag)\n                              }\n                            >\n                              <ReplaceIcon />\n                            </div>\n                          </Tooltip>\n                          {actualPage === \"PENDING\" && (\n                            <Tooltip\n                              position={ToolTipPosition.bottom}\n                              message={i18next.t(\n                                \"expandableFile:label.tooltip.delete\"\n                              )}\n                            >\n                              <div\n                                className=\"container-icon delete\"\n                                onClick={() => {\n                                  setViewConfirm({\n                                    ...viewConfirm,\n                                    [element.tag]: {\n                                      delete: !viewConfirm[element.tag].delete,\n                                      replace: false,\n                                    },\n                                  });\n                                }}\n                              >\n                                <DeleteIcon />\n                              </div>\n                            </Tooltip>\n                          )}\n                        </>\n                      ) : (\n                        <Tooltip\n                          position={ToolTipPosition.bottom}\n                          message={i18next.t(\n                            \"expandableFile:label.tooltip.load\"\n                          )}\n                        >\n                          <div\n                            className=\"container-icon load\"\n                            onClick={() =>\n                              uploadFile(element.isUpload, element.tag)\n                            }\n                          >\n                            <LoadIcon />\n                          </div>\n                        </Tooltip>\n                      )}\n\n                      <input\n                        id={`file-${element.tag}`}\n                        className=\"display-none\"\n                        type=\"file\"\n                        accept=\".png,.jpg,.pdf\"\n                        onChange={(event: React.FormEvent<HTMLInputElement>) =>\n                          verifyError(event, element.tag)\n                        }\n                      />\n                    </>\n                  </div>\n                </div>\n                <div className=\"container-detailPicker-col-sm-12 display-flex\">\n                  {viewConfirm[element.tag]?.delete ||\n                  viewConfirm[element.tag]?.replace ? (\n                    <Confirm\n                      question={\n                        viewConfirm[element.tag]?.delete\n                          ? i18next.t(labelsConfirm[0])\n                          : i18next.t(labelsConfirm[1])\n                      }\n                      optionYes={() => optionYes(element.tag)}\n                      optionNo={() => optionNo(element.tag)}\n                    />\n                  ) : error[\"formatTag\"][element.tag] ? (\n                    <p className=\"p-error\">\n                      {i18next.t(\"expandableFile:label.card.ErrorFormat\")}\n                    </p>\n                  ) : error[\"sizeTag\"][element.tag] ? (\n                    <p className=\"p-error \">\n                      {i18next.t(\"expandableFile:label.card.ErrorSize\")}\n                    </p>\n                  ) : error[\"loadTag\"][element.tag] ? (\n                    <p className=\"p-error\">\n                      {i18next.t(\"expandableFile:label.card.ErrorLoad\")}\n                    </p>\n                  ) : (\n                    serverError.includes(element.tag) && (\n                      <p className=\"p-error \">\n                        {i18next.t(\"expandableFile:label.card.ErrorServer\")}\n                      </p>\n                    )\n                  )}\n                </div>\n              </Fragment>\n            ))}\n          </div>\n        </Collapsible>\n      </div>\n    </>\n  );\n};\nconst mapStateToProps = (state: RootState) => ({\n  serverError: detailPickerSelector(state).serverError,\n  actualPage: pickersSelector(state).actualPage,\n});\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\n  openFile: (params: PickerFileRequestType) => {\n    dispatch(detailPickerActions.getPickerFileRequest(params));\n  },\n  saveFile: (params: ExpandableFileSaveParamsType) => {\n    dispatch(detailPickerActions.getPickerFileSaveRequest(params));\n  },\n  deleteFile: (params: DeleteFileType) => {\n    dispatch(detailPickerActions.getPickerFileDeleteRequest(params));\n  },\n  setWrongFile: (wrongFile: PickerWrongFilePayloadType) => {\n    dispatch(detailPickerActions.setWrongFile(wrongFile));\n  },\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(ExpandableFile);\n"]},"metadata":{},"sourceType":"module"}