{"ast":null,"code":"import { createSlice, createSelector } from \"@reduxjs/toolkit\";\nimport { endsWithAny } from \"utils/endsWithAny\";\nconst wrongFilesInitialValue = {\n  \"dni-front\": false,\n  \"dni-back\": false,\n  \"user-face\": false,\n  \"cbu-certificate\": false,\n  \"driver-insurance-card\": false,\n  \"cuit-certificate\": false,\n  \"driver-license\": false,\n  \"vehicle-identification-back\": false,\n  \"vehicle-identification-front\": false\n};\nexport const initialState = {\n  fetching: false,\n  serverError: [],\n  dirty: false,\n  wrongFiles: wrongFilesInitialValue,\n  nameDisplay: \"\",\n  state: [],\n  pendingUserAdminPicker: {\n    id: 0,\n    enable: false,\n    registerDatetime: \"\",\n    status: {\n      description: \"\",\n      id: 0\n    },\n    personalData: {\n      name: \"\",\n      surname: \"\",\n      dateOfBirth: null,\n      identificationNumber: null,\n      email: \"\",\n      phone: {\n        areaNumber: \"\",\n        countryNumber: \"\",\n        number: \"\",\n        registerDate: undefined\n      }\n    },\n    accountingData: {\n      address: \"\",\n      bankIdentifier: \"\",\n      companyName: \"\",\n      bankName: \"\",\n      fiscalNumber: \"\",\n      sapInterlocutor: \"\",\n      id: 0\n    },\n    vehicle: {\n      type: \"\",\n      active: false,\n      approve: false,\n      patent: \"\",\n      expirationDateDriverLicense: null,\n      expirationDateIdentificationVehicle: null,\n      expirationDatePolicyVehicle: null\n    },\n    files: {\n      personalData: {\n        status: \"\",\n        content: []\n      },\n      accountingData: {\n        status: \"\",\n        content: []\n      },\n      vehicle: {\n        status: \"\",\n        content: []\n      }\n    }\n  }\n};\nconst SLICE_NAME = \"detailPicker\";\n\nconst isRequestAction = action => {\n  const {\n    type\n  } = action;\n  return type.startsWith(SLICE_NAME) && type.endsWith(\"Request\");\n};\n\nconst isResponseAction = action => {\n  const {\n    type\n  } = action;\n  return type.startsWith(SLICE_NAME) && endsWithAny(type, [\"Error\", \"Success\"]);\n};\n\nexport const detailPickerSlice = createSlice({\n  name: SLICE_NAME,\n  initialState,\n  reducers: {\n    getPendingUserPickerRequest: (state, action) => {},\n    getPendingUserPickerSuccess: (state, action) => {\n      const {\n        payload\n      } = action;\n      state.pendingUserAdminPicker = payload;\n      state.nameDisplay = `${payload.personalData.name} ${payload.personalData.surname}`;\n    },\n    getPendingUserPickerError: () => {},\n    setDirty: (state, action) => {\n      state.dirty = action.payload;\n    },\n    setWrongFile: (state, action) => {\n      const {\n        type,\n        value\n      } = action.payload;\n      state.wrongFiles[type] = value;\n    },\n    resetWrongFiles: state => {\n      state.wrongFiles = wrongFilesInitialValue;\n      state.serverError = [];\n    },\n    getPendingUserPickerExportRequest: (state, action) => {},\n    getPendingUserPickerExportSuccess: () => {},\n    getPendingUserPickerExportError: () => {},\n    getPendingUserPickerDocumentsEditRequest: (state, action) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getPendingUserPickerDocumentsEditSuccess: (state, action) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getPendingUserPickerDocumentsEditError: () => {},\n    getAprovePickerRequest: (state, action) => {\n      state.pendingUserAdminPicker = action.payload.params;\n    },\n    getAprovePickerSuccess: (state, action) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getAprovePickerError: () => {},\n    getEditPickerRequest: (state, action) => {},\n    getEditPickerSuccess: (state, action) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getEditPickerError: () => {},\n    getPickerFileRequest: (state, action) => {},\n    getPickerFileSuccess: () => {},\n    getPickerFileError: () => {},\n    getPickerFileSaveRequest: (state, action) => {},\n    getPickerFileSaveSuccess: (state, action) => {\n      const {\n        payload: {\n          tag\n        }\n      } = action;\n      state.serverError = state.serverError.filter(t => t !== tag);\n    },\n    getPickerFileSaveError: (state, action) => {\n      var _state$serverError, _state$serverError2;\n\n      if (!((_state$serverError = state.serverError) !== null && _state$serverError !== void 0 && _state$serverError.includes(action.payload.tag))) (_state$serverError2 = state.serverError) === null || _state$serverError2 === void 0 ? void 0 : _state$serverError2.push(action.payload.tag);\n    },\n    getPickerFileDeleteRequest: (state, action) => {},\n    getPickerFileDeleteSuccess: (state, action) => {\n      const {\n        payload: {\n          tag\n        }\n      } = action;\n      state.serverError = state.serverError.filter(t => t !== tag);\n    },\n    getPickerFileDeleteError: (state, action) => {\n      var _state$serverError3, _state$serverError4;\n\n      if (!((_state$serverError3 = state.serverError) !== null && _state$serverError3 !== void 0 && _state$serverError3.includes(action.payload.tag))) (_state$serverError4 = state.serverError) === null || _state$serverError4 === void 0 ? void 0 : _state$serverError4.push(action.payload.tag);\n    },\n    getProvincesRequest: () => {},\n    getProvincesError: () => {},\n    getProvincesSuccess: (state, action) => {\n      const {\n        payload\n      } = action;\n      state.state = payload;\n    }\n  },\n  extraReducers: builder => builder.addMatcher(isRequestAction, state => {\n    state.fetching = true;\n  }).addMatcher(isResponseAction, state => {\n    state.fetching = false;\n  })\n}); // Se exporta el reducer/slice para asociarlo en la creación del store\n\nexport default detailPickerSlice.reducer; // Selector del slice \"detailPicker\"\n\nexport const detailPickerSelector = state => state.detailPicker; // Has picker wrong files?\n\nexport const hasPickerWrongFilesSelector = createSelector(state => state.detailPicker, picker => {\n  var _picker$serverError;\n\n  return Object.values(picker.wrongFiles).some(v => v) || ((_picker$serverError = picker.serverError) === null || _picker$serverError === void 0 ? void 0 : _picker$serverError.length) > 0;\n});\nexport const hasPickerAllFilesLoadedSelector = createSelector(state => state.detailPicker, picker => {\n  const personalData = picker.pendingUserAdminPicker.files.personalData;\n  const accountingData = picker.pendingUserAdminPicker.files.accountingData;\n  const vehicle = picker.pendingUserAdminPicker.files.vehicle;\n  const type = picker.pendingUserAdminPicker.vehicle.type;\n\n  if (type === \"motorcycle\") {\n    return personalData.status === \"COMPLETED\" && accountingData.status === \"COMPLETED\" && vehicle.status === \"COMPLETED\";\n  }\n\n  return personalData.status === \"COMPLETED\" && accountingData.status === \"COMPLETED\";\n}); // Se exportan todas las acciones\n\nexport const actions = detailPickerSlice.actions;","map":{"version":3,"sources":["/home/nahuel/pickers-admin-front/src/reducers/detailPicker.ts"],"names":["createSlice","createSelector","endsWithAny","wrongFilesInitialValue","initialState","fetching","serverError","dirty","wrongFiles","nameDisplay","state","pendingUserAdminPicker","id","enable","registerDatetime","status","description","personalData","name","surname","dateOfBirth","identificationNumber","email","phone","areaNumber","countryNumber","number","registerDate","undefined","accountingData","address","bankIdentifier","companyName","bankName","fiscalNumber","sapInterlocutor","vehicle","type","active","approve","patent","expirationDateDriverLicense","expirationDateIdentificationVehicle","expirationDatePolicyVehicle","files","content","SLICE_NAME","isRequestAction","action","startsWith","endsWith","isResponseAction","detailPickerSlice","reducers","getPendingUserPickerRequest","getPendingUserPickerSuccess","payload","getPendingUserPickerError","setDirty","setWrongFile","value","resetWrongFiles","getPendingUserPickerExportRequest","getPendingUserPickerExportSuccess","getPendingUserPickerExportError","getPendingUserPickerDocumentsEditRequest","getPendingUserPickerDocumentsEditSuccess","getPendingUserPickerDocumentsEditError","getAprovePickerRequest","params","getAprovePickerSuccess","getAprovePickerError","getEditPickerRequest","getEditPickerSuccess","getEditPickerError","getPickerFileRequest","getPickerFileSuccess","getPickerFileError","getPickerFileSaveRequest","getPickerFileSaveSuccess","tag","filter","t","getPickerFileSaveError","includes","push","getPickerFileDeleteRequest","getPickerFileDeleteSuccess","getPickerFileDeleteError","getProvincesRequest","getProvincesError","getProvincesSuccess","extraReducers","builder","addMatcher","reducer","detailPickerSelector","detailPicker","hasPickerWrongFilesSelector","picker","Object","values","some","v","length","hasPickerAllFilesLoadedSelector","actions"],"mappings":"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","sourcesContent":["import {\n  createSlice,\n  PayloadAction,\n  Action,\n  createSelector,\n} from \"@reduxjs/toolkit\";\nimport { ParamsMiddlewareType, PickerType } from \"pages/pickers/types\";\nimport {\n  DetailPickerStateType,\n  PickerWrongFilePayloadType,\n} from \"./types/detailPicker\";\n\nimport { RootState } from \"store\";\nimport { endsWithAny } from \"utils/endsWithAny\";\nimport { PickerFileRequestType } from \"pages/pickers/detailPicker/types\";\nimport { DeleteFileType, ExpandableFileSaveParamsType } from \"component/admin/ExpandableFile/types\";\nimport { ActionErrorPickersType } from \"./types/pickers\";\nimport { ProvincesTypes } from \"sagas/types/pickers\";\n\nconst wrongFilesInitialValue = {\n  \"dni-front\": false,\n  \"dni-back\": false,\n  \"user-face\": false,\n  \"cbu-certificate\": false,\n  \"driver-insurance-card\": false,\n  \"cuit-certificate\": false,\n  \"driver-license\": false,\n  \"vehicle-identification-back\": false,\n  \"vehicle-identification-front\": false,\n};\n\nexport const initialState: DetailPickerStateType = {\n  fetching: false,\n  serverError: [],\n  dirty: false,\n  wrongFiles: wrongFilesInitialValue,\n  nameDisplay: \"\",\n\n  state: [],\n  pendingUserAdminPicker: {\n    id: 0,\n    enable: false,\n    registerDatetime: \"\",\n    status: {\n      description: \"\",\n      id: 0\n    },\n    personalData: {\n      name: \"\",\n      surname: \"\",\n      dateOfBirth: null,\n      identificationNumber: null,\n      email: \"\",\n      phone: {\n        areaNumber: \"\",\n        countryNumber: \"\",\n        number: \"\",\n        registerDate: undefined\n      }\n    },\n    accountingData: {\n      address: \"\",\n      bankIdentifier: \"\",\n      companyName: \"\",\n      bankName: \"\",\n      fiscalNumber: \"\",\n      sapInterlocutor: \"\",\n      id: 0\n    },\n    vehicle: {\n      type: \"\",\n      active: false,\n      approve: false,\n      patent: \"\",\n      expirationDateDriverLicense: null,\n      expirationDateIdentificationVehicle: null,\n      expirationDatePolicyVehicle: null\n    },\n    files: {\n      personalData: {\n        status: \"\",\n        content: []\n      },\n      accountingData: {\n        status: \"\",\n        content: []\n      },\n      vehicle: {\n        status: \"\",\n        content: []\n      }\n    }\n  }\n};\n\nconst SLICE_NAME = \"detailPicker\";\n\nconst isRequestAction = (action: Action<string>) => {\n  const { type } = action;\n  return type.startsWith(SLICE_NAME) && type.endsWith(\"Request\");\n};\n\nconst isResponseAction = (action: Action<string>) => {\n  const { type } = action;\n  return type.startsWith(SLICE_NAME) && endsWithAny(type, [\"Error\", \"Success\"]);\n};\n\nexport const detailPickerSlice = createSlice({\n  name: SLICE_NAME,\n  initialState,\n  reducers: {\n    \n    getPendingUserPickerRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<number>\n    ) => {},\n    getPendingUserPickerSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerType>\n    ) => {\n      const { payload } = action;\n      state.pendingUserAdminPicker = payload;\n      state.nameDisplay = `${payload.personalData.name} ${payload.personalData.surname}`;\n    },\n    getPendingUserPickerError: () => {},\n    setDirty: (\n      state: DetailPickerStateType,\n      action: PayloadAction<boolean>\n    ) => {\n      state.dirty = action.payload;\n    },\n    setWrongFile: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerWrongFilePayloadType>\n    ) => {\n      const { type, value } = action.payload;\n      state.wrongFiles[type] = value;\n    },\n    resetWrongFiles: (state: DetailPickerStateType) => {\n      state.wrongFiles = wrongFilesInitialValue;\n      state.serverError = [];\n    },\n    getPendingUserPickerExportRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ParamsMiddlewareType>\n    ) => {},\n    getPendingUserPickerExportSuccess: () => {},\n    getPendingUserPickerExportError: () => {},\n    getPendingUserPickerDocumentsEditRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerType>\n    ) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getPendingUserPickerDocumentsEditSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerType>\n    ) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getPendingUserPickerDocumentsEditError: () => {},\n    getAprovePickerRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<{ params: PickerType; goBack: Function }>\n    ) => {\n      state.pendingUserAdminPicker = action.payload.params;\n    },\n    getAprovePickerSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerType>\n    ) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getAprovePickerError: () => {},\n    getEditPickerRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<{ params: PickerType; goBack: Function }>\n    ) => {},\n    getEditPickerSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerType>\n    ) => {\n      state.pendingUserAdminPicker = action.payload;\n    },\n    getEditPickerError: () => {},\n    getPickerFileRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<PickerFileRequestType>\n    ) => {},\n    getPickerFileSuccess: () => {},\n    getPickerFileError: () => {},\n\n    getPickerFileSaveRequest: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ExpandableFileSaveParamsType>\n    ) => {},\n    getPickerFileSaveSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ActionErrorPickersType>\n    ) => {\n      const {\n        payload: { tag },\n      } = action;\n      state.serverError = state.serverError.filter((t) => t !== tag);      \n    },\n    getPickerFileSaveError: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ActionErrorPickersType>\n    ) => {\n      if (!state.serverError?.includes(action.payload.tag))\n        state.serverError?.push(action.payload.tag);\n    },\n    getPickerFileDeleteRequest: (\n      state: DetailPickerStateType, //estado actual del  state\n      action: PayloadAction<DeleteFileType> // params Payload<tipo>\n    ) => {},\n    getPickerFileDeleteSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ActionErrorPickersType>\n    ) => {\n      const {\n        payload: { tag },\n      } = action;\n      state.serverError = state.serverError.filter((t) => t !== tag);\n    },\n    getPickerFileDeleteError: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ActionErrorPickersType>\n    ) => {\n      if (!state.serverError?.includes(action.payload.tag))\n        state.serverError?.push(action.payload.tag);\n    },\n    getProvincesRequest: () => {},\n    getProvincesError: () => {},\n    getProvincesSuccess: (\n      state: DetailPickerStateType,\n      action: PayloadAction<ProvincesTypes[]>\n    ) => {\n      const { payload } = action;\n      state.state = payload;\n    },\n  },\n\n  extraReducers: (builder) =>\n    builder\n      .addMatcher(isRequestAction, (state: DetailPickerStateType) => {\n        state.fetching = true;\n      })\n      .addMatcher(isResponseAction, (state: DetailPickerStateType) => {\n        state.fetching = false;\n      }),\n});\n\n// Se exporta el reducer/slice para asociarlo en la creación del store\nexport default detailPickerSlice.reducer;\n\n// Selector del slice \"detailPicker\"\nexport const detailPickerSelector = (state: RootState) => state.detailPicker;\n\n// Has picker wrong files?\nexport const hasPickerWrongFilesSelector = createSelector(\n  (state: RootState) => state.detailPicker,\n  (picker) =>\n    Object.values(picker.wrongFiles).some((v) => v) ||\n    picker.serverError?.length > 0\n);\nexport const hasPickerAllFilesLoadedSelector = createSelector(\n  (state: RootState) => state.detailPicker,\n  (picker) => {\n    const personalData = picker.pendingUserAdminPicker.files.personalData;\n    const accountingData = picker.pendingUserAdminPicker.files.accountingData;\n    const vehicle = picker.pendingUserAdminPicker.files.vehicle;\n    const type = picker.pendingUserAdminPicker.vehicle.type;\n\n    if (type === \"motorcycle\") {\n      return (\n        personalData.status === \"COMPLETED\" &&\n        accountingData.status === \"COMPLETED\" &&\n        vehicle.status === \"COMPLETED\"\n      );\n    }\n    return (\n      personalData.status === \"COMPLETED\" &&\n      accountingData.status === \"COMPLETED\"\n    );\n  }\n);\n\n// Se exportan todas las acciones\nexport const actions = detailPickerSlice.actions;\n"]},"metadata":{},"sourceType":"module"}