{"ast":null,"code":"import moment from \"moment\";\nimport { call, put, delay, takeLatest, all } from \"redux-saga/effects\";\nimport { DATE_FORMATS, FIRST_ANIMATION_TIME } from \"utils/constants\";\nimport * as preliquidationsMiddleware from \"../middleware/preliquidations\";\nimport { actions as notificationActions } from \"../reducers/notification\";\nimport { actions as preliquidationActions } from \"../reducers/preliquidation\";\nimport i18next from \"i18next\";\nimport { replace } from \"connected-react-router\";\nconst sagas = [takeLatest(preliquidationActions.getPreliquidationsRequest.type, getPreliquidations), takeLatest(preliquidationActions.getDetailPreliquidationsRequest.type, getDetailPreliquidations), takeLatest(preliquidationActions.getMorePreliquidationsRequest.type, getMorePreliquidations), takeLatest(preliquidationActions.getInvoiceDetailRequest.type, getInvoiceDetail), takeLatest(preliquidationActions.getInvoiceDetailSaveRequest.type, putSaveDetailInvoice), takeLatest(preliquidationActions.getInvoiceDetailApproveFetch.type, patchApproveDetailInvoice), takeLatest(preliquidationActions.getInvoiceDetailDeleteRequest.type, putDeleteDetailInvoice), takeLatest(preliquidationActions.sendAccountingRequest.type, sendAccounting), takeLatest(preliquidationActions.replaceInvoiceFile.type, replaceInvoiceFile), takeLatest(preliquidationActions.uploadInvoiceFile.type, uploadInvoiceFile), takeLatest(preliquidationActions.deleteInvoiceFileRequest.type, deleteInvoiceFile), takeLatest(preliquidationActions.getInvoiceDetailTypesRequest.type, getDetailInvoiceTypes), takeLatest(preliquidationActions.adjustAmount.type, adjustAmount)];\nexport default sagas;\n\nconst process = body => {\n  return { ...body,\n    emisionDate: body !== null && body !== void 0 && body.emisionDate ? moment(body === null || body === void 0 ? void 0 : body.emisionDate, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate) : null\n  };\n};\n\nconst processDatePicker = payload => {\n  let payloadCast = payload;\n  const {\n    generatedAt\n  } = payload;\n  if (!generatedAt) delete payloadCast.generatedAt;else {\n    payloadCast = { ...payload,\n      generatedAt: moment(generatedAt, DATE_FORMATS.shortDate).format(DATE_FORMATS.shortISODate)\n    };\n  }\n  return payloadCast;\n};\n\nfunction* getPreliquidations(_ref) {\n  let {\n    payload\n  } = _ref;\n\n  if ((payload === null || payload === void 0 ? void 0 : payload.status) === \"\") {\n    delete payload[\"status\"];\n  }\n\n  let payloadCast = processDatePicker(payload);\n  const response = yield call(preliquidationsMiddleware.getPreliquidations, payloadCast);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getPreliquidationsError());\n  } else {\n    yield put(preliquidationActions.getPreliquidationsSuccess(response.data));\n  }\n}\n\nfunction* getDetailPreliquidations(_ref2) {\n  let {\n    payload\n  } = _ref2;\n  const response = yield call(preliquidationsMiddleware.getDetailPreliquidations, payload);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getDetailPreliquidationsError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(preliquidationActions.getDetailPreliquidationsSuccess(result));\n  }\n}\n\nfunction* getMorePreliquidations(_ref3) {\n  let {\n    payload\n  } = _ref3;\n\n  if ((payload === null || payload === void 0 ? void 0 : payload.status) === \"\") {\n    delete payload[\"status\"];\n  }\n\n  let payloadCast = processDatePicker(payload);\n  const response = yield call(preliquidationsMiddleware.getPreliquidations, payloadCast);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getMorePreliquidationsError());\n  } else {\n    const {\n      result: {\n        items\n      },\n      ...rest\n    } = response.data;\n    yield put(preliquidationActions.getMorePreliquidationsSuccess({\n      items,\n      ...rest\n    }));\n  }\n}\n\nfunction* getInvoiceDetail(_ref4) {\n  let {\n    payload\n  } = _ref4;\n  const response = yield call(preliquidationsMiddleware.getDetailInvoice, payload);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(preliquidationActions.getInvoiceDetailSuccess(result));\n  }\n}\n\nfunction* putSaveDetailInvoice(_ref5) {\n  var _payload$invoiceType;\n\n  let {\n    payload\n  } = _ref5;\n  let result = {\n    emisionDate: payload.emisionDate || null,\n    invoiceType: (_payload$invoiceType = payload.invoiceType) !== null && _payload$invoiceType !== void 0 && _payload$invoiceType.tag ? payload.invoiceType : null,\n    invoiceNumber: payload.invoiceNumber || null,\n    salePoint: payload.salePoint || null,\n    caeNumber: payload.caeNumber || null\n  };\n  result = process(result);\n  const response = yield call(preliquidationsMiddleware.putSaveDetailInvoice, payload.presettementId, result);\n\n  if (response.status !== 200) {\n    yield put(notificationActions.showNotification({\n      level: \"error\",\n      title: i18next.t(\"global:title.modal.connectionError\"),\n      body: i18next.t(\"global:label.modal.connectionError\")\n    }));\n    yield put(preliquidationActions.getInvoiceDetailSaveError());\n  } else {\n    yield put(replace(\"/presettlements\"));\n    yield put(preliquidationActions.getInvoiceDetailSaveSuccess());\n  }\n}\n\nfunction* patchApproveDetailInvoice(_ref6) {\n  let {\n    payload\n  } = _ref6;\n  let result = {\n    emisionDate: payload.emisionDate || \"\",\n    invoiceType: payload.invoiceType,\n    invoiceNumber: payload.invoiceNumber,\n    salePoint: payload.salePoint,\n    caeNumber: payload.caeNumber\n  };\n  result = process(result);\n  const [response] = yield all([call(preliquidationsMiddleware.patchApproveDetailInvoice, payload.presettementId, result), delay(FIRST_ANIMATION_TIME)]);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailApproveError());\n    yield delay(FIRST_ANIMATION_TIME + 1000);\n    yield put(notificationActions.showNotification({\n      level: \"error\",\n      title: i18next.t(\"global:title.modal.connectionError\"),\n      body: i18next.t(\"global:label.modal.connectionError\")\n    }));\n  } else {\n    yield put(preliquidationActions.getInvoiceDetailApproveSuccess());\n    yield delay(2 * FIRST_ANIMATION_TIME);\n    yield put(replace(\"/presettlements\"));\n  }\n}\n\nfunction* putDeleteDetailInvoice(_ref7) {\n  let {\n    payload\n  } = _ref7;\n  const response = yield call(preliquidationsMiddleware.putDeleteDetailInvoice, payload.presettlementId);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailDeleteError());\n  } else {\n    yield put(replace(\"/presettlements\"));\n    yield put(preliquidationActions.getInvoiceDetailDeleteSuccess());\n  }\n}\n\nfunction* replaceInvoiceFile(_ref8) {\n  let {\n    payload\n  } = _ref8;\n  const response = yield call(preliquidationsMiddleware.replaceInvoiceFile, payload);\n\n  if (response.status !== 200 && response.status !== 201) {\n    yield put(preliquidationActions.replaceInvoiceFileError());\n  } else {\n    yield put(preliquidationActions.getInvoiceDetailRequest(payload.id.toString()));\n    yield put(preliquidationActions.setInvoiceFileStatus({\n      loading: false\n    }));\n  }\n}\n\nfunction* uploadInvoiceFile(_ref9) {\n  let {\n    payload\n  } = _ref9;\n  const response = yield call(preliquidationsMiddleware.uploadInvoiceFile, payload);\n\n  if (response.status !== 200 && response.status !== 201) {\n    yield put(preliquidationActions.uploadInvoiceFileError());\n  } else {\n    yield put(preliquidationActions.uploadInvoiceFileSuccess(payload.content));\n    yield put(preliquidationActions.setInvoiceFileStatus({\n      loading: false\n    }));\n  }\n}\n\nfunction* deleteInvoiceFile(_ref10) {\n  let {\n    payload\n  } = _ref10;\n  const response = yield call(preliquidationsMiddleware.deleteInvoiceFile, payload.id);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.deleteInvoiceFileError());\n  } else {\n    yield put(preliquidationActions.getInvoiceDetailRequest(payload.id.toString()));\n  }\n}\n\nfunction* sendAccounting(_ref11) {\n  let {\n    payload\n  } = _ref11;\n  const response = yield call(preliquidationsMiddleware.sendAccounting, payload);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.sendAccountingError());\n  } else {\n    yield put(preliquidationActions.sendAccountingSuccess());\n    yield put(preliquidationActions.getPreliquidationsRequest({\n      limit: window.innerHeight < 770 ? 3 : 4,\n      offset: 0\n    }));\n  }\n}\n\nfunction* getDetailInvoiceTypes() {\n  const response = yield call(preliquidationsMiddleware.getDetailInvoiceTypes);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailTypesError());\n  } else {\n    const {\n      result\n    } = response.data;\n    yield put(preliquidationActions.getInvoiceDetailTypesSuccess(result));\n  }\n}\n\nfunction* adjustAmount(_ref12) {\n  let {\n    payload\n  } = _ref12;\n  const [response] = yield all([call(preliquidationsMiddleware.preliquidationAdjustment, payload), delay(FIRST_ANIMATION_TIME)]);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.adjustAmountError());\n\n    if (response.data.statusCode === 30020) {\n      yield delay(2500);\n      yield put(preliquidationActions.toggleModalVisibility(false));\n      yield put(notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"detailPreliquidation:title.modal.concurrency\"),\n        body: i18next.t(\"detailPreliquidation:body.modal.concurrency\"),\n        onClick: () => payload.callback(payload.id)\n      }));\n    }\n  } else {\n    yield put(preliquidationActions.adjustAmountSuccess());\n  }\n}","map":{"version":3,"sources":["/home/nahuel/pickers-admin-front/src/sagas/preliquidation.ts"],"names":["moment","call","put","delay","takeLatest","all","DATE_FORMATS","FIRST_ANIMATION_TIME","preliquidationsMiddleware","actions","notificationActions","preliquidationActions","i18next","replace","sagas","getPreliquidationsRequest","type","getPreliquidations","getDetailPreliquidationsRequest","getDetailPreliquidations","getMorePreliquidationsRequest","getMorePreliquidations","getInvoiceDetailRequest","getInvoiceDetail","getInvoiceDetailSaveRequest","putSaveDetailInvoice","getInvoiceDetailApproveFetch","patchApproveDetailInvoice","getInvoiceDetailDeleteRequest","putDeleteDetailInvoice","sendAccountingRequest","sendAccounting","replaceInvoiceFile","uploadInvoiceFile","deleteInvoiceFileRequest","deleteInvoiceFile","getInvoiceDetailTypesRequest","getDetailInvoiceTypes","adjustAmount","process","body","emisionDate","shortDate","format","shortISODate","processDatePicker","payload","payloadCast","generatedAt","status","response","getPreliquidationsError","getPreliquidationsSuccess","data","getDetailPreliquidationsError","result","getDetailPreliquidationsSuccess","getMorePreliquidationsError","items","rest","getMorePreliquidationsSuccess","getDetailInvoice","getInvoiceDetailError","getInvoiceDetailSuccess","invoiceType","tag","invoiceNumber","salePoint","caeNumber","presettementId","showNotification","level","title","t","getInvoiceDetailSaveError","getInvoiceDetailSaveSuccess","getInvoiceDetailApproveError","getInvoiceDetailApproveSuccess","presettlementId","getInvoiceDetailDeleteError","getInvoiceDetailDeleteSuccess","replaceInvoiceFileError","id","toString","setInvoiceFileStatus","loading","uploadInvoiceFileError","uploadInvoiceFileSuccess","content","deleteInvoiceFileError","sendAccountingError","sendAccountingSuccess","limit","window","innerHeight","offset","getInvoiceDetailTypesError","getInvoiceDetailTypesSuccess","preliquidationAdjustment","adjustAmountError","statusCode","toggleModalVisibility","onClick","callback","adjustAmountSuccess"],"mappings":"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","sourcesContent":["import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { AxiosResponse } from \"axios\";\nimport moment from \"moment\";\nimport { ApiResponse } from \"middleware/api\";\nimport { detailPreliquidationDatePicker } from \"pages/preliquidation/DetailPreliquidation/invoice/types\";\n\nimport {\n  call,\n  CallEffect,\n  put,\n  delay,\n  PutEffect,\n  takeLatest,\n  all,\n  AllEffect,\n} from \"redux-saga/effects\";\nimport { DATE_FORMATS, FIRST_ANIMATION_TIME } from \"utils/constants\";\nimport * as preliquidationsMiddleware from \"../middleware/preliquidations\";\nimport { actions as notificationActions } from \"../reducers/notification\";\nimport { actions as preliquidationActions } from \"../reducers/preliquidation\";\nimport {\n  AdjustAmountMiddlewareType,\n  AdjustmenResponseType,\n  DetailPreliquidationBodyParamsType,\n  DetailPreliquidationsApiResponseType,\n  DetailPreliquidationsContentResponseType,\n  DetailPreliquidationsInvoiceApiResponseType,\n  DetailPreliquidationsInvoiceTypesApiResponseType,\n  DetatilPreliquidationsApiResponse,\n  PreliquidationCastParamsMiddlewareType,\n  PreliquidationParamsMiddlewareType,\n  PreliquidationsApiResponse,\n  RejectInvoiceMiddlewareType,\n  sendAccountinMiddlewareType,\n  UploadInvoiceFileMiddlewareType,\n} from \"./types/preliquidation\";\nimport i18next from \"i18next\";\nimport { NotificationStateType } from \"reducers/types/notification\";\nimport { replace } from \"connected-react-router\";\n\nconst sagas = [\n  takeLatest(\n    preliquidationActions.getPreliquidationsRequest.type,\n    getPreliquidations\n  ),\n  takeLatest(\n    preliquidationActions.getDetailPreliquidationsRequest.type,\n    getDetailPreliquidations\n  ),\n  takeLatest(\n    preliquidationActions.getMorePreliquidationsRequest.type,\n    getMorePreliquidations\n  ),\n  takeLatest(\n    preliquidationActions.getInvoiceDetailRequest.type,\n    getInvoiceDetail\n  ),\n  takeLatest(\n    preliquidationActions.getInvoiceDetailSaveRequest.type,\n    putSaveDetailInvoice\n  ),\n  takeLatest(\n    preliquidationActions.getInvoiceDetailApproveFetch.type,\n    patchApproveDetailInvoice\n  ),\n  takeLatest(\n    preliquidationActions.getInvoiceDetailDeleteRequest.type,\n    putDeleteDetailInvoice\n  ),\n  takeLatest(\n    preliquidationActions.sendAccountingRequest.type,\n    sendAccounting\n  ),\n  takeLatest(preliquidationActions.replaceInvoiceFile.type, replaceInvoiceFile),\n  takeLatest(preliquidationActions.uploadInvoiceFile.type, uploadInvoiceFile),\n  takeLatest(\n    preliquidationActions.deleteInvoiceFileRequest.type,\n    deleteInvoiceFile\n  ),\n  takeLatest(\n    preliquidationActions.getInvoiceDetailTypesRequest.type,\n    getDetailInvoiceTypes\n  ),\n  takeLatest(preliquidationActions.adjustAmount.type, adjustAmount),\n];\n\nexport default sagas;\n\nconst process = (body: DetailPreliquidationBodyParamsType) => {\n  return {\n    ...body,\n    emisionDate: body?.emisionDate\n      ? moment(body?.emisionDate, DATE_FORMATS.shortDate).format(\n        DATE_FORMATS.shortISODate\n      )\n      : null,\n  };\n};\n\nconst processDatePicker = (\n  payload: PreliquidationParamsMiddlewareType\n): PreliquidationCastParamsMiddlewareType => {\n  let payloadCast: PreliquidationCastParamsMiddlewareType =\n    payload as PreliquidationCastParamsMiddlewareType;\n\n  const { generatedAt } = payload;\n  if (!generatedAt) delete payloadCast.generatedAt;\n  else {\n    payloadCast = {\n      ...payload,\n      generatedAt: moment(generatedAt, DATE_FORMATS.shortDate).format(\n        DATE_FORMATS.shortISODate\n      ),\n    };\n  }\n\n  return payloadCast;\n};\n\nfunction* getPreliquidations({\n  payload,\n}: PayloadAction<PreliquidationParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PreliquidationsApiResponse>>\n  | PutEffect<{ type: string }>,\n  void,\n  PreliquidationsApiResponse\n> {\n  if (payload?.status === \"\") {\n    delete payload[\"status\"];\n  }\n  let payloadCast: PreliquidationCastParamsMiddlewareType =\n    processDatePicker(payload);\n  const response = yield call(\n    preliquidationsMiddleware.getPreliquidations,\n    payloadCast\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getPreliquidationsError());\n  } else {\n    yield put(preliquidationActions.getPreliquidationsSuccess(response.data));\n  }\n}\n\nfunction* getDetailPreliquidations({\n  payload,\n}: PayloadAction<number>): Generator<\n  | CallEffect<AxiosResponse<DetatilPreliquidationsApiResponse>>\n  | PutEffect<{ type: string }>,\n  void,\n  DetatilPreliquidationsApiResponse\n> {\n  const response = yield call(\n    preliquidationsMiddleware.getDetailPreliquidations,\n    payload\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getDetailPreliquidationsError());\n  } else {\n    const { result } = response.data;\n    yield put(preliquidationActions.getDetailPreliquidationsSuccess(result));\n  }\n}\n\nfunction* getMorePreliquidations({\n  payload,\n}: PayloadAction<PreliquidationParamsMiddlewareType>): Generator<\n  | CallEffect<AxiosResponse<PreliquidationsApiResponse>>\n  | PutEffect<{ type: string }>,\n  void,\n  PreliquidationsApiResponse\n> {\n  if (payload?.status === \"\") {\n    delete payload[\"status\"];\n  }\n  let payloadCast: PreliquidationCastParamsMiddlewareType =\n    processDatePicker(payload);\n  const response = yield call(\n    preliquidationsMiddleware.getPreliquidations,\n    payloadCast\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getMorePreliquidationsError());\n  } else {\n    const {\n      result: { items },\n      ...rest\n    } = response.data;\n    yield put(\n      preliquidationActions.getMorePreliquidationsSuccess({ items, ...rest })\n    );\n  }\n}\n\nfunction* getInvoiceDetail({\n  payload,\n}: PayloadAction<string | undefined>): Generator<\n  | PutEffect<{\n    payload: DetailPreliquidationsContentResponseType;\n    type: string;\n  }>\n  | PutEffect<{ payload: undefined; type: string }>\n  | CallEffect<AxiosResponse<DetailPreliquidationsContentResponseType>>,\n  void,\n  DetailPreliquidationsApiResponseType\n> {\n  const response = yield call(\n    preliquidationsMiddleware.getDetailInvoice,\n    payload\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailError());\n  } else {\n    const { result } = response.data;\n    yield put(preliquidationActions.getInvoiceDetailSuccess(result));\n  }\n}\n\nfunction* putSaveDetailInvoice({\n  payload,\n}: PayloadAction<detailPreliquidationDatePicker>): Generator<\n  | PutEffect<{ payload: detailPreliquidationDatePicker; type: string }>\n  | PutEffect<{ type: string }>\n  | PutEffect<{ type: string; content: NotificationStateType }>\n  | CallEffect<AxiosResponse<DetailPreliquidationsInvoiceApiResponseType>>,\n  void,\n  DetailPreliquidationsInvoiceApiResponseType\n> {\n  let result: DetailPreliquidationBodyParamsType = {\n    emisionDate: payload.emisionDate || null,\n    invoiceType: payload.invoiceType?.tag ? payload.invoiceType : null,\n    invoiceNumber: payload.invoiceNumber || null,\n    salePoint: payload.salePoint || null,\n    caeNumber: payload.caeNumber || null,\n  };\n  result = process(result);\n\n  const response = yield call(\n    preliquidationsMiddleware.putSaveDetailInvoice,\n    payload.presettementId,\n    result\n  );\n  if (response.status !== 200) {\n    yield put(\n      notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"global:title.modal.connectionError\"),\n        body: i18next.t(\"global:label.modal.connectionError\"),\n      })\n    );\n    yield put(preliquidationActions.getInvoiceDetailSaveError());\n  } else {\n    yield put(replace(\"/presettlements\"));\n    yield put(preliquidationActions.getInvoiceDetailSaveSuccess());\n  }\n}\n\nfunction* patchApproveDetailInvoice({\n  payload,\n}: PayloadAction<detailPreliquidationDatePicker>): Generator<\n  | PutEffect<{ payload: detailPreliquidationDatePicker; type: string }>\n  | PutEffect<{ type: string; payload: undefined }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<DetailPreliquidationsInvoiceApiResponseType>>\n  | AllEffect<CallEffect<any> | CallEffect<true>>,\n  void,\n  [DetailPreliquidationsInvoiceApiResponseType]\n> {\n  let result: DetailPreliquidationBodyParamsType = {\n    emisionDate: payload.emisionDate || \"\",\n    invoiceType: payload.invoiceType,\n    invoiceNumber: payload.invoiceNumber,\n    salePoint: payload.salePoint,\n    caeNumber: payload.caeNumber,\n  };\n  result = process(result);\n\n  const [response] = yield all([\n    call(\n      preliquidationsMiddleware.patchApproveDetailInvoice,\n      payload.presettementId,\n      result\n    ),\n    delay(FIRST_ANIMATION_TIME),\n  ]);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailApproveError());\n    yield delay(FIRST_ANIMATION_TIME + 1000);\n    yield put(\n      notificationActions.showNotification({\n        level: \"error\",\n        title: i18next.t(\"global:title.modal.connectionError\"),\n        body: i18next.t(\"global:label.modal.connectionError\"),\n      })\n    );\n  } else {\n    yield put(preliquidationActions.getInvoiceDetailApproveSuccess());\n    yield delay(2 * FIRST_ANIMATION_TIME);\n    yield put(replace(\"/presettlements\"));\n  }\n}\n\nfunction* putDeleteDetailInvoice({\n  payload,\n}: PayloadAction<RejectInvoiceMiddlewareType>): Generator<\n  | PutEffect<{ payload: detailPreliquidationDatePicker; type: string }>\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<DetailPreliquidationsInvoiceApiResponseType>>,\n  void,\n  DetailPreliquidationsInvoiceApiResponseType\n> {\n  const response = yield call(\n    preliquidationsMiddleware.putDeleteDetailInvoice,\n    payload.presettlementId\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailDeleteError());\n  } else {\n    yield put(replace(\"/presettlements\"));\n    yield put(preliquidationActions.getInvoiceDetailDeleteSuccess());\n  }\n}\n\nfunction* replaceInvoiceFile({\n  payload,\n}: PayloadAction<UploadInvoiceFileMiddlewareType>): Generator<\n  | PutEffect<{ payload: string; type: string }>\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<ApiResponse<void>>>,\n  void,\n  ApiResponse<void>\n> {\n  const response = yield call(\n    preliquidationsMiddleware.replaceInvoiceFile,\n    payload\n  );\n  if (response.status !== 200 && response.status !== 201) {\n    yield put(preliquidationActions.replaceInvoiceFileError());\n  } else {\n    yield put(\n      preliquidationActions.getInvoiceDetailRequest(payload.id.toString())\n    );\n    yield put(preliquidationActions.setInvoiceFileStatus({ loading: false }));\n  }\n}\n\nfunction* uploadInvoiceFile({\n  payload,\n}: PayloadAction<UploadInvoiceFileMiddlewareType>): Generator<\n  | PutEffect<{ payload: string; type: string }>\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<ApiResponse<void>>>,\n  void,\n  ApiResponse<void>\n> {\n  const response = yield call(\n    preliquidationsMiddleware.uploadInvoiceFile,\n    payload\n  );\n  if (response.status !== 200 && response.status !== 201) {\n    yield put(preliquidationActions.uploadInvoiceFileError());\n  } else {\n    yield put(preliquidationActions.uploadInvoiceFileSuccess(payload.content));\n    yield put(preliquidationActions.setInvoiceFileStatus({ loading: false }));\n  }\n}\n\nfunction* deleteInvoiceFile({\n  payload,\n}: PayloadAction<{ id: number }>): Generator<\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ payload: string | undefined; type: string }>\n  | CallEffect<AxiosResponse<ApiResponse<void>>>,\n  void,\n  ApiResponse<void>\n> {\n  const response = yield call(\n    preliquidationsMiddleware.deleteInvoiceFile,\n    payload.id\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.deleteInvoiceFileError());\n  } else {\n    yield put(\n      preliquidationActions.getInvoiceDetailRequest(payload.id.toString())\n    );\n  }\n}\n\nfunction* sendAccounting({\n  payload,\n}: PayloadAction<sendAccountinMiddlewareType>): Generator<\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<ApiResponse<void>>>,\n  void,\n  ApiResponse<void>\n> {\n  const response = yield call(\n    preliquidationsMiddleware.sendAccounting,\n    payload\n  );\n  if (response.status !== 200) {\n    yield put(preliquidationActions.sendAccountingError());\n  } else {\n    yield put(\n      preliquidationActions.sendAccountingSuccess()\n    );\n    yield put(preliquidationActions.getPreliquidationsRequest({\n      limit: window.innerHeight < 770 ? 3 : 4,\n      offset: 0\n    }))\n  }\n}\n\n\n\nfunction* getDetailInvoiceTypes(): Generator<\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<DetailPreliquidationsInvoiceTypesApiResponseType>>,\n  void,\n  DetailPreliquidationsInvoiceTypesApiResponseType\n> {\n  const response = yield call(preliquidationsMiddleware.getDetailInvoiceTypes);\n  if (response.status !== 200) {\n    yield put(preliquidationActions.getInvoiceDetailTypesError());\n  } else {\n    const { result } = response.data;\n    yield put(preliquidationActions.getInvoiceDetailTypesSuccess(result));\n  }\n}\n\nfunction* adjustAmount({\n  payload,\n}: PayloadAction<AdjustAmountMiddlewareType>): Generator<\n  | PutEffect<{ payload: undefined; type: string }>\n  | PutEffect<{ type: string; content: NotificationStateType }>\n  | PutEffect<{ type: string }>\n  | CallEffect<AxiosResponse<ApiResponse<void>>>\n  | AllEffect<CallEffect<any> | CallEffect<true>>,\n  void,\n  [ApiResponse<AdjustmenResponseType>]\n> {\n  const [response] = yield all([\n    call(preliquidationsMiddleware.preliquidationAdjustment, payload),\n    delay(FIRST_ANIMATION_TIME),\n  ]);\n\n  if (response.status !== 200) {\n    yield put(preliquidationActions.adjustAmountError());\n    if (response.data.statusCode === 30020) {\n      yield delay(2500);\n      yield put(preliquidationActions.toggleModalVisibility(false));\n      yield put(\n        notificationActions.showNotification({\n          level: \"error\",\n          title: i18next.t(\"detailPreliquidation:title.modal.concurrency\"),\n          body: i18next.t(\"detailPreliquidation:body.modal.concurrency\"),\n          onClick: () => payload.callback(payload.id)\n        })\n      );\n    }\n  } else {\n    yield put(preliquidationActions.adjustAmountSuccess());\n  }\n}\n"]},"metadata":{},"sourceType":"module"}