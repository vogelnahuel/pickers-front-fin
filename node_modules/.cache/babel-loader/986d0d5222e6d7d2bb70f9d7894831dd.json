{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nvar reactDom = require('react-dom');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar PrintIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n            C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n            M3.5,8.499\\n            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n            M14.5,0.499v4h4\"\n  }));\n};\n\nvar TOOLTIP_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar PrintButton = function (_a) {\n  var enableShortcuts = _a.enableShortcuts,\n      onClick = _a.onClick;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var label = l10n && l10n.print ? l10n.print.print : 'Print';\n  var ariaKeyShortcuts = enableShortcuts ? core.isMac() ? 'Meta+P' : 'Ctrl+P' : '';\n  return React__namespace.createElement(core.Tooltip, {\n    ariaControlsSuffix: \"print\",\n    position: core.Position.BottomCenter,\n    target: React__namespace.createElement(core.MinimalButton, {\n      ariaKeyShortcuts: ariaKeyShortcuts,\n      ariaLabel: label,\n      onClick: onClick\n    }, React__namespace.createElement(PrintIcon, null)),\n    content: function () {\n      return label;\n    },\n    offset: TOOLTIP_OFFSET\n  });\n};\n\nvar PrintStatus;\n\n(function (PrintStatus) {\n  PrintStatus[\"CheckingPermission\"] = \"CheckingPermission\";\n  PrintStatus[\"Inactive\"] = \"Inactive\";\n  PrintStatus[\"Preparing\"] = \"Preparing\";\n  PrintStatus[\"Cancelled\"] = \"Cancelled\";\n  PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\n\nvar Print = function (_a) {\n  var children = _a.children,\n      enableShortcuts = _a.enableShortcuts,\n      store = _a.store;\n\n  var print = function () {\n    store.update('printStatus', PrintStatus.CheckingPermission);\n  };\n\n  var render = children || PrintButton;\n  return render({\n    enableShortcuts: enableShortcuts,\n    onClick: print\n  });\n};\n\nvar PERMISSION_PRINT = 4;\nvar PERMISSION_PRINT_HIGHT_QUALITY = 2048;\n\nvar CheckPrintPermission = function (_a) {\n  var doc = _a.doc,\n      store = _a.store;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n\n  var _b = React__namespace.useState(true),\n      isAllowed = _b[0],\n      setIsAllowed = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getPermissions().then(function (permissions) {\n      var canPrint = permissions === null || permissions.includes(PERMISSION_PRINT) || permissions.includes(PERMISSION_PRINT_HIGHT_QUALITY);\n      canPrint ? store.update('printStatus', PrintStatus.Preparing) : setIsAllowed(false);\n    });\n  }, []);\n  return isAllowed ? React__namespace.createElement(React__namespace.Fragment, null) : React__namespace.createElement(core.Modal, {\n    ariaControlsSuffix: \"print-permission\",\n    closeOnClickOutside: false,\n    closeOnEscape: false,\n    content: function (toggle) {\n      var close = function () {\n        toggle();\n        store.update('printStatus', PrintStatus.Cancelled);\n      };\n\n      return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n        className: \"rpv-print__permission-body\"\n      }, l10n && l10n.print ? l10n.print.disallowPrint : 'The document does not allow to print'), React__namespace.createElement(\"div\", {\n        className: \"rpv-print__permission-footer\"\n      }, React__namespace.createElement(core.Button, {\n        onClick: close\n      }, l10n && l10n.print ? l10n.print.close : 'Close')));\n    },\n    isOpened: true\n  });\n};\n\nvar PrintProgress = function (_a) {\n  var numLoadedPages = _a.numLoadedPages,\n      numPages = _a.numPages,\n      onCancel = _a.onCancel;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var progress = Math.floor(numLoadedPages * 100 / numPages);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-print__progress\"\n  }, React__namespace.createElement(\"div\", {\n    className: core.classNames({\n      'rpv-print__progress-body': true,\n      'rpv-print__progress-body--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-print__progress-message\"\n  }, l10n && l10n.print ? l10n.print.preparingDocument : 'Preparing document ...'), React__namespace.createElement(\"div\", {\n    className: \"rpv-print__progress-bar\"\n  }, React__namespace.createElement(core.ProgressBar, {\n    progress: progress\n  })), React__namespace.createElement(core.Button, {\n    onClick: onCancel\n  }, l10n && l10n.print ? l10n.print.cancel : 'Cancel')));\n};\n\nvar PageThumbnail = function (_a) {\n  var canvas = _a.canvas,\n      page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React__namespace.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var printUnit = 150 / 72;\n    canvas.height = Math.floor(pageHeight * printUnit);\n    canvas.width = Math.floor(pageWidth * printUnit);\n    var canvasContext = canvas.getContext('2d');\n    canvasContext.save();\n    canvasContext.fillStyle = 'rgb(255, 255, 255)';\n    canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n    canvasContext.restore();\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: 1\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      intent: 'print',\n      transform: [printUnit, 0, 0, printUnit, 0, 0],\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      'toBlob' in canvas ? canvas.toBlob(function (blob) {\n        setSrc(URL.createObjectURL(blob));\n      }) : setSrc(canvas.toDataURL());\n    }, function () {});\n  }, []);\n  return src && React__namespace.createElement(\"div\", {\n    className: \"rpv-print__page\"\n  }, React__namespace.createElement(\"img\", {\n    src: src,\n    onLoad: function () {\n      return onLoad();\n    }\n  }));\n};\n\nvar PageThumbnailContainer = function (_a) {\n  var canvas = _a.canvas,\n      doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n\n  var _b = React__namespace.useState({\n    height: pageHeight,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  React__namespace.useEffect(function () {\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        height: viewport.height,\n        page: pdfPage,\n        viewportRotation: viewport.rotation,\n        width: viewport.width\n      });\n    });\n  }, []);\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  return page && React__namespace.createElement(PageThumbnail, {\n    canvas: canvas,\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    onLoad: onLoad\n  });\n};\n\nvar PrintZone = function (_a) {\n  var doc = _a.doc,\n      numLoadedPages = _a.numLoadedPages,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onLoad = _a.onLoad;\n  var canvas = React__namespace.useMemo(function () {\n    return document.createElement('canvas');\n  }, []);\n  var container = React__namespace.useMemo(function () {\n    var zoneEle = document.querySelector('.rpv-print__zone');\n\n    if (zoneEle) {\n      return zoneEle;\n    }\n\n    var div = document.createElement('div');\n    div.classList.add('rpv-print__zone');\n    document.body.appendChild(div);\n    return div;\n  }, []);\n  React__namespace.useEffect(function () {\n    if (printStatus === PrintStatus.Ready) {\n      document.documentElement.classList.add('rpv-print__html-printing');\n      document.body.classList.add('rpv-print__body-printing');\n      window.print();\n    }\n\n    var handler = function () {\n      if (printStatus === PrintStatus.Ready) {\n        document.documentElement.classList.remove('rpv-print__html-printing');\n        document.body.classList.remove('rpv-print__body-printing');\n        var zones = document.querySelectorAll('.rpv-print__zone');\n\n        if (zones) {\n          zones.forEach(function (zoneEle) {\n            zoneEle.parentElement.removeChild(zoneEle);\n          });\n        }\n\n        canvas.height = 0;\n        canvas.width = 0;\n        document.removeEventListener('mousemove', handler);\n        onCancel();\n      }\n    };\n\n    document.addEventListener('mousemove', handler);\n    return function () {\n      return document.removeEventListener('mousemove', handler);\n    };\n  }, [printStatus]);\n  return reactDom.createPortal(React__namespace.createElement(React__namespace.Fragment, null, Array(Math.min(numLoadedPages + 1, doc.numPages)).fill(0).map(function (_, index) {\n    return React__namespace.createElement(PageThumbnailContainer, {\n      key: index,\n      canvas: canvas,\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      onLoad: onLoad\n    });\n  }), React__namespace.createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: \"@page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\"\n    }\n  })), container);\n};\n\nvar PrintContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      store = _a.store;\n\n  var _b = React__namespace.useState(PrintStatus.Inactive),\n      printStatus = _b[0],\n      setPrintStatus = _b[1];\n\n  var _c = React__namespace.useState(0),\n      numLoadedPagesForPrint = _c[0],\n      setNumLoadedPagesForPrint = _c[1];\n\n  var cancelPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    setPrintStatus(PrintStatus.Inactive);\n  };\n\n  var handlePrintStatus = function (status) {\n    return setPrintStatus(status);\n  };\n\n  var onLoadPage = function () {\n    var total = numLoadedPagesForPrint + 1;\n\n    if (total <= doc.numPages) {\n      setNumLoadedPagesForPrint(total);\n      total === doc.numPages && setPrintStatus(PrintStatus.Ready);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('printStatus', handlePrintStatus);\n    return function () {\n      store.unsubscribe('printStatus', handlePrintStatus);\n    };\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, printStatus === PrintStatus.CheckingPermission && React__namespace.createElement(CheckPrintPermission, {\n    doc: doc,\n    store: store\n  }), printStatus === PrintStatus.Preparing && React__namespace.createElement(PrintProgress, {\n    numLoadedPages: numLoadedPagesForPrint,\n    numPages: doc.numPages,\n    onCancel: cancelPrinting\n  }), (printStatus === PrintStatus.Preparing || printStatus === PrintStatus.Ready) && numLoadedPagesForPrint <= doc.numPages && React__namespace.createElement(PrintZone, {\n    doc: doc,\n    numLoadedPages: numLoadedPagesForPrint,\n    pageHeight: pageHeight,\n    pageWidth: pageWidth,\n    printStatus: printStatus,\n    rotation: rotation,\n    onCancel: cancelPrinting,\n    onLoad: onLoadPage\n  }));\n};\n\nvar PrintMenuItem = function (_a) {\n  var onClick = _a.onClick;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var label = l10n && l10n.print ? l10n.print.print : 'Print';\n  return React__namespace.createElement(core.MenuItem, {\n    icon: React__namespace.createElement(PrintIcon, null),\n    onClick: onClick\n  }, label);\n};\n\nvar ShortcutHandler = function (_a) {\n  var containerRef = _a.containerRef,\n      store = _a.store;\n\n  var keydownHandler = function (e) {\n    if (e.shiftKey || e.altKey || e.key !== 'p') {\n      return;\n    }\n\n    var isCommandPressed = core.isMac() ? e.metaKey : e.ctrlKey;\n\n    if (!isCommandPressed) {\n      return;\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle || !document.activeElement || !containerEle.contains(document.activeElement)) {\n      return;\n    }\n\n    e.preventDefault();\n    store.update('printStatus', PrintStatus.Preparing);\n  };\n\n  React__namespace.useEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    document.addEventListener('keydown', keydownHandler);\n    return function () {\n      document.removeEventListener('keydown', keydownHandler);\n    };\n  }, [containerRef.current]);\n  return React__namespace.createElement(React__namespace.Fragment, null);\n};\n\nvar printPlugin = function (props) {\n  var printPluginProps = React__namespace.useMemo(function () {\n    return Object.assign({}, {\n      enableShortcuts: true\n    }, props);\n  }, []);\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      printStatus: PrintStatus.Inactive\n    });\n  }, []);\n\n  var PrintDecorator = function (props) {\n    return React__namespace.createElement(Print, __assign({\n      enableShortcuts: printPluginProps.enableShortcuts\n    }, props, {\n      store: store\n    }));\n  };\n\n  var PrintButtonDecorator = function () {\n    return React__namespace.createElement(PrintDecorator, null, function (props) {\n      return React__namespace.createElement(PrintButton, __assign({}, props));\n    });\n  };\n\n  var PrintMenuItemDecorator = function (props) {\n    return React__namespace.createElement(PrintDecorator, null, function (p) {\n      return React__namespace.createElement(PrintMenuItem, {\n        onClick: function () {\n          p.onClick();\n          props.onClick();\n        }\n      });\n    });\n  };\n\n  var renderViewer = function (props) {\n    var slot = props.slot;\n    var updateSlot = {\n      children: React__namespace.createElement(React__namespace.Fragment, null, printPluginProps.enableShortcuts && React__namespace.createElement(ShortcutHandler, {\n        containerRef: props.containerRef,\n        store: store\n      }), React__namespace.createElement(PrintContainer, {\n        doc: props.doc,\n        pageHeight: props.pageHeight,\n        pageWidth: props.pageWidth,\n        rotation: props.rotation,\n        store: store\n      }), slot.children)\n    };\n    return __assign(__assign({}, slot), updateSlot);\n  };\n\n  return {\n    renderViewer: renderViewer,\n    Print: PrintDecorator,\n    PrintButton: PrintButtonDecorator,\n    PrintMenuItem: PrintMenuItemDecorator\n  };\n};\n\nexports.PrintIcon = PrintIcon;\nexports.printPlugin = printPlugin;","map":{"version":3,"sources":["/home/nahuel/pickers-admin-front/node_modules/@react-pdf-viewer/print/lib/cjs/print.js"],"names":["Object","defineProperty","exports","value","React","require","core","reactDom","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","PrintIcon","createElement","Icon","size","TOOLTIP_OFFSET","left","top","PrintButton","_a","enableShortcuts","onClick","l10n","useContext","LocalizationContext","label","print","ariaKeyShortcuts","isMac","Tooltip","ariaControlsSuffix","position","Position","BottomCenter","target","MinimalButton","ariaLabel","content","offset","PrintStatus","Print","children","store","update","CheckingPermission","render","PERMISSION_PRINT","PERMISSION_PRINT_HIGHT_QUALITY","CheckPrintPermission","doc","_b","useState","isAllowed","setIsAllowed","useEffect","getPermissions","then","permissions","canPrint","includes","Preparing","Fragment","Modal","closeOnClickOutside","closeOnEscape","toggle","close","Cancelled","className","disallowPrint","Button","isOpened","PrintProgress","numLoadedPages","numPages","onCancel","direction","ThemeContext","isRtl","TextDirection","RightToLeft","progress","Math","floor","classNames","preparingDocument","ProgressBar","cancel","PageThumbnail","canvas","page","pageHeight","pageWidth","rotation","onLoad","renderTask","useRef","src","setSrc","task","current","printUnit","height","width","canvasContext","getContext","save","fillStyle","fillRect","restore","viewport","getViewport","scale","intent","transform","promise","toBlob","blob","URL","createObjectURL","toDataURL","PageThumbnailContainer","pageIndex","viewportRotation","pageSize","setPageSize","isVertical","abs","getPage","pdfPage","rotationNumber","PrintZone","printStatus","useMemo","document","container","zoneEle","querySelector","div","classList","add","body","appendChild","Ready","documentElement","window","handler","remove","zones","querySelectorAll","parentElement","removeChild","removeEventListener","addEventListener","createPortal","Array","min","fill","map","_","index","key","dangerouslySetInnerHTML","__html","PrintContainer","Inactive","setPrintStatus","_c","numLoadedPagesForPrint","setNumLoadedPagesForPrint","cancelPrinting","handlePrintStatus","status","onLoadPage","total","subscribe","unsubscribe","PrintMenuItem","MenuItem","icon","ShortcutHandler","containerRef","keydownHandler","shiftKey","altKey","isCommandPressed","metaKey","ctrlKey","containerEle","activeElement","contains","preventDefault","printPlugin","props","printPluginProps","createStore","PrintDecorator","PrintButtonDecorator","PrintMenuItemDecorator","renderViewer","slot","updateSlot"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\nvar reactDom = require('react-dom');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar PrintIcon = function () { return (React__namespace.createElement(core.Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n            C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n            M3.5,8.499\\n            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n            M14.5,0.499v4h4\" }))); };\n\nvar TOOLTIP_OFFSET = { left: 0, top: 8 };\nvar PrintButton = function (_a) {\n    var enableShortcuts = _a.enableShortcuts, onClick = _a.onClick;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var label = l10n && l10n.print ? l10n.print.print : 'Print';\n    var ariaKeyShortcuts = enableShortcuts ? (core.isMac() ? 'Meta+P' : 'Ctrl+P') : '';\n    return (React__namespace.createElement(core.Tooltip, { ariaControlsSuffix: \"print\", position: core.Position.BottomCenter, target: React__namespace.createElement(core.MinimalButton, { ariaKeyShortcuts: ariaKeyShortcuts, ariaLabel: label, onClick: onClick },\n            React__namespace.createElement(PrintIcon, null)), content: function () { return label; }, offset: TOOLTIP_OFFSET }));\n};\n\nvar PrintStatus;\n(function (PrintStatus) {\n    PrintStatus[\"CheckingPermission\"] = \"CheckingPermission\";\n    PrintStatus[\"Inactive\"] = \"Inactive\";\n    PrintStatus[\"Preparing\"] = \"Preparing\";\n    PrintStatus[\"Cancelled\"] = \"Cancelled\";\n    PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\n\nvar Print = function (_a) {\n    var children = _a.children, enableShortcuts = _a.enableShortcuts, store = _a.store;\n    var print = function () {\n        store.update('printStatus', PrintStatus.CheckingPermission);\n    };\n    var render = children || PrintButton;\n    return render({\n        enableShortcuts: enableShortcuts,\n        onClick: print,\n    });\n};\n\nvar PERMISSION_PRINT = 4;\nvar PERMISSION_PRINT_HIGHT_QUALITY = 2048;\nvar CheckPrintPermission = function (_a) {\n    var doc = _a.doc, store = _a.store;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var _b = React__namespace.useState(true), isAllowed = _b[0], setIsAllowed = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getPermissions().then(function (permissions) {\n            var canPrint = permissions === null ||\n                permissions.includes(PERMISSION_PRINT) ||\n                permissions.includes(PERMISSION_PRINT_HIGHT_QUALITY);\n            canPrint ? store.update('printStatus', PrintStatus.Preparing) : setIsAllowed(false);\n        });\n    }, []);\n    return isAllowed ? (React__namespace.createElement(React__namespace.Fragment, null)) : (React__namespace.createElement(core.Modal, { ariaControlsSuffix: \"print-permission\", closeOnClickOutside: false, closeOnEscape: false, content: function (toggle) {\n            var close = function () {\n                toggle();\n                store.update('printStatus', PrintStatus.Cancelled);\n            };\n            return (React__namespace.createElement(React__namespace.Fragment, null,\n                React__namespace.createElement(\"div\", { className: \"rpv-print__permission-body\" }, l10n && l10n.print ? l10n.print.disallowPrint : 'The document does not allow to print'),\n                React__namespace.createElement(\"div\", { className: \"rpv-print__permission-footer\" },\n                    React__namespace.createElement(core.Button, { onClick: close }, l10n && l10n.print ? l10n.print.close : 'Close'))));\n        }, isOpened: true }));\n};\n\nvar PrintProgress = function (_a) {\n    var numLoadedPages = _a.numLoadedPages, numPages = _a.numPages, onCancel = _a.onCancel;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var progress = Math.floor((numLoadedPages * 100) / numPages);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-print__progress\" },\n        React__namespace.createElement(\"div\", { className: core.classNames({\n                'rpv-print__progress-body': true,\n                'rpv-print__progress-body--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-print__progress-message\" }, l10n && l10n.print ? l10n.print.preparingDocument : 'Preparing document ...'),\n            React__namespace.createElement(\"div\", { className: \"rpv-print__progress-bar\" },\n                React__namespace.createElement(core.ProgressBar, { progress: progress })),\n            React__namespace.createElement(core.Button, { onClick: onCancel }, l10n && l10n.print ? l10n.print.cancel : 'Cancel'))));\n};\n\nvar PageThumbnail = function (_a) {\n    var canvas = _a.canvas, page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    React__namespace.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var printUnit = 150 / 72;\n        canvas.height = Math.floor(pageHeight * printUnit);\n        canvas.width = Math.floor(pageWidth * printUnit);\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.save();\n        canvasContext.fillStyle = 'rgb(255, 255, 255)';\n        canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n        canvasContext.restore();\n        var viewport = page.getViewport({ rotation: rotation, scale: 1 });\n        renderTask.current = page.render({\n            canvasContext: canvasContext,\n            intent: 'print',\n            transform: [printUnit, 0, 0, printUnit, 0, 0],\n            viewport: viewport,\n        });\n        renderTask.current.promise.then(function () {\n            'toBlob' in canvas\n                ? canvas.toBlob(function (blob) {\n                    setSrc(URL.createObjectURL(blob));\n                })\n                : setSrc(canvas.toDataURL());\n        }, function () {\n        });\n    }, []);\n    return (src && (React__namespace.createElement(\"div\", { className: \"rpv-print__page\" },\n        React__namespace.createElement(\"img\", { src: src, onLoad: function () { return onLoad(); } }))));\n};\n\nvar PageThumbnailContainer = function (_a) {\n    var canvas = _a.canvas, doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var _b = React__namespace.useState({\n        height: pageHeight,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    React__namespace.useEffect(function () {\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                height: viewport.height,\n                page: pdfPage,\n                viewportRotation: viewport.rotation,\n                width: viewport.width,\n            });\n        });\n    }, []);\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    return (page && (React__namespace.createElement(PageThumbnail, { canvas: canvas, page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotationNumber, onLoad: onLoad })));\n};\n\nvar PrintZone = function (_a) {\n    var doc = _a.doc, numLoadedPages = _a.numLoadedPages, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onLoad = _a.onLoad;\n    var canvas = React__namespace.useMemo(function () { return document.createElement('canvas'); }, []);\n    var container = React__namespace.useMemo(function () {\n        var zoneEle = document.querySelector('.rpv-print__zone');\n        if (zoneEle) {\n            return zoneEle;\n        }\n        var div = document.createElement('div');\n        div.classList.add('rpv-print__zone');\n        document.body.appendChild(div);\n        return div;\n    }, []);\n    React__namespace.useEffect(function () {\n        if (printStatus === PrintStatus.Ready) {\n            document.documentElement.classList.add('rpv-print__html-printing');\n            document.body.classList.add('rpv-print__body-printing');\n            window.print();\n        }\n        var handler = function () {\n            if (printStatus === PrintStatus.Ready) {\n                document.documentElement.classList.remove('rpv-print__html-printing');\n                document.body.classList.remove('rpv-print__body-printing');\n                var zones = document.querySelectorAll('.rpv-print__zone');\n                if (zones) {\n                    zones.forEach(function (zoneEle) {\n                        zoneEle.parentElement.removeChild(zoneEle);\n                    });\n                }\n                canvas.height = 0;\n                canvas.width = 0;\n                document.removeEventListener('mousemove', handler);\n                onCancel();\n            }\n        };\n        document.addEventListener('mousemove', handler);\n        return function () { return document.removeEventListener('mousemove', handler); };\n    }, [printStatus]);\n    return reactDom.createPortal(React__namespace.createElement(React__namespace.Fragment, null,\n        Array(Math.min(numLoadedPages + 1, doc.numPages))\n            .fill(0)\n            .map(function (_, index) { return (React__namespace.createElement(PageThumbnailContainer, { key: index, canvas: canvas, doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation, onLoad: onLoad })); }),\n        React__namespace.createElement(\"style\", { dangerouslySetInnerHTML: {\n                __html: \"@page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\",\n            } })), container);\n};\n\nvar PrintContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, store = _a.store;\n    var _b = React__namespace.useState(PrintStatus.Inactive), printStatus = _b[0], setPrintStatus = _b[1];\n    var _c = React__namespace.useState(0), numLoadedPagesForPrint = _c[0], setNumLoadedPagesForPrint = _c[1];\n    var cancelPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        setPrintStatus(PrintStatus.Inactive);\n    };\n    var handlePrintStatus = function (status) { return setPrintStatus(status); };\n    var onLoadPage = function () {\n        var total = numLoadedPagesForPrint + 1;\n        if (total <= doc.numPages) {\n            setNumLoadedPagesForPrint(total);\n            total === doc.numPages && setPrintStatus(PrintStatus.Ready);\n        }\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('printStatus', handlePrintStatus);\n        return function () {\n            store.unsubscribe('printStatus', handlePrintStatus);\n        };\n    }, []);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        printStatus === PrintStatus.CheckingPermission && React__namespace.createElement(CheckPrintPermission, { doc: doc, store: store }),\n        printStatus === PrintStatus.Preparing && (React__namespace.createElement(PrintProgress, { numLoadedPages: numLoadedPagesForPrint, numPages: doc.numPages, onCancel: cancelPrinting })),\n        (printStatus === PrintStatus.Preparing || printStatus === PrintStatus.Ready) &&\n            numLoadedPagesForPrint <= doc.numPages && (React__namespace.createElement(PrintZone, { doc: doc, numLoadedPages: numLoadedPagesForPrint, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onLoad: onLoadPage }))));\n};\n\nvar PrintMenuItem = function (_a) {\n    var onClick = _a.onClick;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var label = l10n && l10n.print ? l10n.print.print : 'Print';\n    return (React__namespace.createElement(core.MenuItem, { icon: React__namespace.createElement(PrintIcon, null), onClick: onClick }, label));\n};\n\nvar ShortcutHandler = function (_a) {\n    var containerRef = _a.containerRef, store = _a.store;\n    var keydownHandler = function (e) {\n        if (e.shiftKey || e.altKey || e.key !== 'p') {\n            return;\n        }\n        var isCommandPressed = core.isMac() ? e.metaKey : e.ctrlKey;\n        if (!isCommandPressed) {\n            return;\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle || !document.activeElement || !containerEle.contains(document.activeElement)) {\n            return;\n        }\n        e.preventDefault();\n        store.update('printStatus', PrintStatus.Preparing);\n    };\n    React__namespace.useEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        document.addEventListener('keydown', keydownHandler);\n        return function () {\n            document.removeEventListener('keydown', keydownHandler);\n        };\n    }, [containerRef.current]);\n    return React__namespace.createElement(React__namespace.Fragment, null);\n};\n\nvar printPlugin = function (props) {\n    var printPluginProps = React__namespace.useMemo(function () { return Object.assign({}, { enableShortcuts: true }, props); }, []);\n    var store = React__namespace.useMemo(function () {\n        return core.createStore({\n            printStatus: PrintStatus.Inactive,\n        });\n    }, []);\n    var PrintDecorator = function (props) { return (React__namespace.createElement(Print, __assign({ enableShortcuts: printPluginProps.enableShortcuts }, props, { store: store }))); };\n    var PrintButtonDecorator = function () { return React__namespace.createElement(PrintDecorator, null, function (props) { return React__namespace.createElement(PrintButton, __assign({}, props)); }); };\n    var PrintMenuItemDecorator = function (props) { return (React__namespace.createElement(PrintDecorator, null, function (p) { return (React__namespace.createElement(PrintMenuItem, { onClick: function () {\n            p.onClick();\n            props.onClick();\n        } })); })); };\n    var renderViewer = function (props) {\n        var slot = props.slot;\n        var updateSlot = {\n            children: (React__namespace.createElement(React__namespace.Fragment, null,\n                printPluginProps.enableShortcuts && (React__namespace.createElement(ShortcutHandler, { containerRef: props.containerRef, store: store })),\n                React__namespace.createElement(PrintContainer, { doc: props.doc, pageHeight: props.pageHeight, pageWidth: props.pageWidth, rotation: props.rotation, store: store }),\n                slot.children)),\n        };\n        return __assign(__assign({}, slot), updateSlot);\n    };\n    return {\n        renderViewer: renderViewer,\n        Print: PrintDecorator,\n        PrintButton: PrintButtonDecorator,\n        PrintMenuItem: PrintMenuItemDecorator,\n    };\n};\n\nexports.PrintIcon = PrintIcon;\nexports.printPlugin = printPlugin;\n"]},"metadata":{},"sourceType":"script"}